import{t as v,i as _,o as Me,c as $,a as p,s as x,p as Ae,d as S,b as M,e as E,f as u,M as q,g as R,F as L,S as U,h as N,m as O,j as Ve,k as ae,l as Oe,I as he,u as be,r as J,n as G,q as oe,v as De,w as se,x as Te,y as le,z as Fe}from"./vendor.8732934f.js";const Re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};Re();const je="spt-custom-quests-editor",Be="1.0.7",ze="1.1.0",Ue="Online editor for Custom Quests mod (Single Player Tarkov)",Je={start:"vite",dev:"vite",build:"vite build","build:production":"vite build --base=/aki_CustomQuestsEditor/",serve:"vite preview",lint:"eslint .  --max-warnings 0 --ext .ts,.tsx,.js","lint:all":"npm run lint && npm run prettier:check",prettier:"prettier --write .","prettier:check":"prettier --check .","test:all":"npm run lint:all && yarn run tsc && npm run build",tsc:"tsc -p . --noEmit",deploy:"npm run lint:all && npm run tsc && npm run build:production && npm run gh-pages","gh-pages":"gh-pages -d dist -b gh-pages",clean:"rimraf dist"},Ge="MIT",We={"@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0",eslint:"^8.10.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3",prettier:"^2.5.1",rimraf:"^3.0.2",typescript:"^4.6.2",vite:"^2.8.6","vite-plugin-solid":"^2.2.6"},Ke={"@types/ramda":"^0.28.1",ramda:"^0.28.0","solid-js":"^1.3.11"};var de={name:je,version:Be,custom_quests_target_version:ze,description:Ue,scripts:Je,license:Ge,devDependencies:We,dependencies:Ke};const Ze=v("<h2></h2>"),Ye=v('<h4>For <a target="_blank" href="https://hub.sp-tarkov.com/files/file/517-custom-quests/">Custom Quests</a> v</h4>'),He=e=>[(()=>{const t=Ze.cloneNode(!0);return t.style.setProperty("text-align","center"),_(t,()=>e.children),t})(),(()=>{const t=Ye.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return i.nextSibling,t.style.setProperty("position","absolute"),t.style.setProperty("margin","0"),t.style.setProperty("right","10px"),t.style.setProperty("top","6px"),i.style.setProperty("color","blue"),_(t,()=>e.customQuestsVersion,null),t})()],ue=()=>{},Xe=e=>{const t=e.onDropJson??ue,n=e.onDropInvalidJson??ue,[,i]=e.isDraggingSignal;i(!1);const r=document.getElementById("root");if(!r)return console.error("no root element found"),null;const s=a=>{i(!0),a.preventDefault()},o=a=>{i(!1),a.preventDefault()},d=a=>{i(!0),a.preventDefault()},l=a=>{if(i(!1),a.dataTransfer){const f=a.dataTransfer.files[0],c=new FileReader;c.onloadend=function(){if(typeof this.result=="string")try{const g=JSON.parse(this.result);t(f.name,g)}catch(g){n(g)}},c.readAsText(a.dataTransfer.files[0])}a.preventDefault()};return r.addEventListener("dragenter",s),r.addEventListener("dragleave",o),r.addEventListener("dragover",d),r.addEventListener("drop",l),Me(()=>{r.removeEventListener("dragenter",s),r.removeEventListener("dragleave",o),r.removeEventListener("dragover",d),r.removeEventListener("drop",l)}),null},et=v('<a><button type="button"></button></a>'),tt=e=>e.filter(t=>t.id!==""),nt=e=>e.map(t=>{if(t.rewards&&t.rewards.items){const n={},i=t.rewards.items;return Object.keys(i).forEach(r=>{r!==""&&(n[r]=i[r])}),{...t,rewards:{...t.rewards,items:n}}}return t}),rt=e=>e.map(t=>{if(t.missions){const n=t.missions.map(i=>"accepted_items"in i?{...i,accepted_items:i.accepted_items.filter(r=>Boolean(r))}:i);return{...t,missions:n}}return t}),it=e=>Ae(nt,tt,rt)(e),st=e=>{const t=it(e);return"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,void 0,4))},lt=e=>{const t=$(()=>e.loadedJsonFiles[e.selectedQuestFile??-1]),n=$(()=>t()?.name??""),i=$(()=>st(t()?.data??[]));return(()=>{const r=et.cloneNode(!0),s=r.firstChild;return _(s,()=>`Download ${n()}`),p(o=>{const d=n(),l=i(),a=e.tabIndex;return d!==o._v$&&x(r,"download",o._v$=d),l!==o._v$2&&x(r,"href",o._v$2=l),a!==o._v$3&&x(s,"tabindex",o._v$3=a),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()},at={any:!0,customs:!0,factory:!0,laboratory:!0,interchange:!0,lighthouse:!0,reserve:!0,shoreline:!0,woods:!0},ot={any:!0,customs:!0,factory:!0,factory4_day:!0,factory4_night:!0,laboratory:!0,interchange:!0,lighthouse:!0,reserve:!0,shoreline:!0,woods:!0},dt=Object.keys(ot),H=Object.keys(at),ut=v('<div><label for="form_disabled">enabled: </label><input id="form_disabled" type="checkbox"></div>'),ct=e=>{const t=$(()=>!e.quest.disabled);return(()=>{const n=ut.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",s=>{e.updateQuest(o=>({...o,disabled:!s.currentTarget.checked}))}),p(s=>{const o=e.formIndex,d=t();return o!==s._v$&&x(r,"tabindex",s._v$=o),d!==s._v$2&&(r.checked=s._v$2=d),s},{_v$:void 0,_v$2:void 0}),n})()},_t=v('<div><label>: </label><input type="text"></div>'),ft=e=>(M(()=>{if(e.fieldName==="id"&&!e.quest.id){const t=document.getElementById(`form_${e.fieldName}`);t&&t.focus()}return e.quest.id}),(()=>{const t=_t.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName,i),r.$$input=s=>e.updateQuest(o=>({...o,[e.fieldName]:s.currentTarget.value})),r.style.setProperty("display","inline-block"),r.style.setProperty("float","left"),p(s=>{const o=`form_${e.fieldName}`,d=e.quest[e.fieldName],l=`form_${e.fieldName}`,a=e.formIndex;return o!==s._v$&&x(n,"for",s._v$=o),d!==s._v$2&&(r.value=s._v$2=d),l!==s._v$3&&x(r,"id",s._v$3=l),a!==s._v$4&&x(r,"tabindex",s._v$4=a),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})());S(["input"]);const X=["ch","cz","en","es-mx","es","fr","ge","hu","it","jp","kr","pl","po","ru","sk","tu"],ee=e=>X.includes(e),gt=e=>{if(typeof e=="string")return null;if(e){let t=!0;if(Object.keys(e).forEach(n=>{ee(n)||(t=!1)}),!t)return"Unknown locale names found"}return null},j=(e,t)=>{const n=gt(e);if(n!==null)throw new Error(`${n} for '${t}'`)},mt=v('<select><option value="set_locale">Set locale...</option></select>'),yt=v("<select></select>"),vt=v('<div><label>: </label><input type="text"></div>'),ce=v("<option></option>"),A=e=>{const[t,n]=E(null);M(l=>{if(l!==e.uniqId&&typeof e.questString=="object"){const a=Object.keys(e.questString)[0]??null;a&&n(a)}return e.uniqId});const i=l=>a=>{const f=a.currentTarget.value;ee(f)&&(n(f),e.updateQuestString(()=>({[f]:l})))},r=l=>{const a=l.currentTarget.value;ee(a)&&n(a)},s=$(()=>{if(typeof e.questString=="string")return e.questString;const l=t();return l&&typeof e.questString=="object"?e.questString[l]??"":""}),o=l=>{const a=l.currentTarget.value;if(typeof e.questString=="string"||e.questString===void 0){e.updateQuestString(()=>a);return}const f=t();f&&typeof e.questString=="object"&&e.updateQuestString(c=>!c||typeof c=="string"?{[f]:a}:{...c,[f]:a})},d=l=>typeof e.questString=="object"&&e.questString[l]?` : ${e.questString[l]}`:"";return(()=>{const l=vt.cloneNode(!0),a=l.firstChild,f=a.firstChild,c=a.nextSibling;return l.style.setProperty("padding-left","15px"),l.style.setProperty("padding-top","15px"),a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("clear","left"),a.style.setProperty("width","180px"),a.style.setProperty("text-align","right"),a.style.setProperty("margin-right","10px"),_(a,()=>e.fieldName,f),c.$$input=o,c.style.setProperty("display","inline-block"),c.style.setProperty("float","left"),c.style.setProperty("width","180px"),_(l,u(U,{get children(){return[u(q,{get when(){return typeof e.questString=="string"||e.questString===void 0},get children(){const g=mt.cloneNode(!0);return g.firstChild,R(g,"change",i(e.questString)),_(g,u(L,{each:X,children:b=>(()=>{const m=ce.cloneNode(!0);return m.value=b,_(m,b),m})()}),null),p(()=>x(g,"tabindex",e.formIndex+1)),g}}),u(q,{get when(){return typeof e.questString=="object"},get children(){const g=yt.cloneNode(!0);return g.addEventListener("change",r),g.style.setProperty("max-width","180px"),_(g,u(L,{each:X,children:b=>(()=>{const m=ce.cloneNode(!0);return m.value=b,_(m,b,null),_(m,()=>d(b),null),p(()=>m.selected=t()===b),m})()})),p(()=>x(g,"tabindex",e.formIndex+1)),g}})]}}),null),p(g=>{const b=`form_${e.fieldName}`,m=e.formIndex,h=s(),I=`form_${e.fieldName}`;return b!==g._v$&&x(a,"for",g._v$=b),m!==g._v$2&&x(c,"tabindex",g._v$2=m),h!==g._v$3&&(c.value=g._v$3=h),I!==g._v$4&&x(c,"id",g._v$4=I),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})()};S(["input"]);const ht=v("<label></label>"),bt=v('<input type="text">'),$t=v('<input type="button" value="Ok">'),pt=v("<select></select>"),kt=v('<input type="button" value="Edit manually...">'),xt=v("<div></div>"),Pt=v("<option></option>"),te=e=>{const[t,n]=E(!1);M(d=>(d!==e.uniqId&&n(!1),e.uniqId));const i=$(()=>{const d=[...e.allValues];return d.includes(e.value)||d.push(e.value),d}),r=d=>{const l=d.currentTarget.value;e.setValue?.(l),e.onSelectValue?.(l)},s=$(()=>`form_generic_dropdown_id_${e.fieldName}_${e.formIndex}`),o=()=>{const d=document.getElementById(s());d&&e.onSelectValue?.(d.value),n(!1)};return(()=>{const d=xt.cloneNode(!0);return _(d,u(N,{get when(){return Boolean(e.fieldName)},get children(){const l=ht.cloneNode(!0);return l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l.style.setProperty("clear","left"),l.style.setProperty("width","180px"),l.style.setProperty("text-align","right"),l.style.setProperty("margin-right","10px"),_(l,()=>`${e.fieldName}: `),p(()=>x(l,"for",s())),l}}),null),_(d,u(U,{get children(){return[u(q,{get when(){return t()},get children(){return[(()=>{const l=bt.cloneNode(!0);return l.addEventListener("keypress",a=>{a.key==="Enter"&&o()}),l.$$input=a=>{const f=a.currentTarget.value;f&&e.setValue?.(f)},l.autofocus=!0,l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l.style.setProperty("width","180px"),p(a=>{const f=s(),c=e.formIndex;return f!==a._v$&&x(l,"id",a._v$=f),c!==a._v$2&&x(l,"tabindex",a._v$2=c),a},{_v$:void 0,_v$2:void 0}),l})(),(()=>{const l=$t.cloneNode(!0);return l.$$click=()=>{o()},l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),p(()=>x(l,"tabindex",e.formIndex+1)),l})()]}}),u(q,{get when(){return!t()},get children(){return[(()=>{const l=pt.cloneNode(!0);return l.addEventListener("change",r),l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l.style.setProperty("width","180px"),_(l,u(L,{get each(){return i()},children:a=>(()=>{const f=Pt.cloneNode(!0);return f.value=a,_(f,a),p(()=>f.selected=a===e.value),f})()})),p(()=>x(l,"tabindex",e.formIndex)),l})(),u(N,{get when(){return e.editable},get children(){const l=kt.cloneNode(!0);return l.$$click=()=>{n(!0);const a=document.getElementById(s());a&&a.focus()},l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),p(()=>x(l,"tabindex",e.formIndex+1)),l}})]}})]}}),null),_(d,()=>e.children,null),p(()=>d.style.setProperty("padding",e.paddingValue?`${e.paddingValue}px`:"15px")),d})()};S(["input","click"]);const It=v('<input type="button" value="Cancel">'),wt=v('<div><label></label><input type="button" tabindex="-1"><div></div></div>'),Nt=v('<input type="button" value="Remove">'),ne=e=>{const[t,n]=E(!1),i=$(()=>`${e.uniqId}_${e.fieldName}`),r=$(()=>(e.possibleValues??[]).filter(s=>!e.values.includes(s)));return(()=>{const s=wt.cloneNode(!0),o=s.firstChild,d=o.nextSibling,l=d.nextSibling;return s.style.setProperty("padding","15px"),o.style.setProperty("display","inline-block"),o.style.setProperty("float","left"),o.style.setProperty("clear","left"),o.style.setProperty("width","180px"),o.style.setProperty("text-align","right"),o.style.setProperty("margin-right","10px"),_(o,()=>`${e.fieldName}: `),d.$$click=()=>{n(!0)},l.style.setProperty("padding-left","180px"),_(l,u(N,{get when(){return t()},get children(){return u(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_add`},get allValues(){return r()},get value(){return`Select ${e.wordingButton} id...`},onSelectValue:a=>(n(!1),e.updateValues(f=>[a,...f])),get children(){const a=It.cloneNode(!0);return a.$$click=()=>{n(!1)},a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a}})}}),null),_(l,u(L,{get each(){return e.values},children:(a,f)=>u(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_${f()}`},get allValues(){return r()},value:a,onSelectValue:c=>{e.updateValues(g=>g.map((b,m)=>m===f()?c:b))},get children(){const c=Nt.cloneNode(!0);return c.$$click=()=>e.updateValues(g=>g.filter((b,m)=>m!==f())),c.style.setProperty("display","inline-block"),c.style.setProperty("float","left"),c}})}),null),p(a=>{const f=t(),c=`Add ${e.wordingButton} id...`;return f!==a._v$&&(d.disabled=a._v$=f),c!==a._v$2&&(d.value=a._v$2=c),a},{_v$:void 0,_v$2:void 0}),s})()};S(["click"]);const St={Kill:{type:"Kill"},GiveItem:{type:"GiveItem",accepted_items:[]},PlaceItem:{type:"PlaceItem",accepted_items:[],zone_id:"gazel"},PlaceBeacon:{type:"PlaceBeacon",zone_id:"gazel"},PlaceSignalJammer:{type:"PlaceSignalJammer",zone_id:"gazel"},VisitPlace:{type:"VisitPlace",place_id:"gazel"}},$e=["Kill","GiveItem","PlaceItem","PlaceBeacon","PlaceSignalJammer","VisitPlace"],pe=["Savage","AnyPmc","Usec","Bear"],qt=e=>{if(e.locations!==void 0&&!Array.isArray(e.locations))throw new Error("invalid kill mission: 'locations' should be an array");(e.locations||[]).forEach(n=>{if(!n||typeof n!="string")throw new Error("invalid location found in kill mission")})},_e=e=>{if(!Array.isArray(e.accepted_items))throw new Error("invalid GiveItem 'accepted_items' field is missing or invalid for GiveItem mission");e.accepted_items.forEach(t=>{if(!t||typeof t!="string")throw new Error("invalid GiveItem 'accepted_items': ids should be a string")})},Z=e=>{if(!e.zone_id||typeof e.zone_id!="string")throw new Error("invalid given zone_id for mission");if(e.plant_time!==void 0&&typeof e.plant_time!="number")throw new Error("invalid plant_time type for mission, it should be a number");e.need_survive!==void 0&&j(e.need_survive,"need_survive")},Et={Kill:e=>{if(e.target!==void 0&&!pe.includes(e.target))throw new Error(`invalid kill mission target '${e.target}'`);if(qt(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid kill mission 'count', it should be a number")},GiveItem:e=>{if(_e(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid GiveItem mission 'count', it should be a number");if(e.found_in_raid_only!==void 0&&typeof e.found_in_raid_only!="boolean")throw new Error("invalid GiveItem mission 'found_in_raid_only', it should be a boolean")},PlaceItem:e=>{Z(e),_e(e)},PlaceBeacon:e=>{Z(e)},PlaceSignalJammer:e=>{Z(e)},VisitPlace:e=>{if(!e.place_id||typeof e.place_id!="string")throw new Error("invalid given place_id for mission");e.need_survive!==void 0&&j(e.need_survive,"need_survive")}},Ct=e=>{if(typeof e!="object")throw new Error("invalid mission, it should be an object");if(!$e.includes(e.type))throw new Error(`invalid mission 'type' field: '${e.type}'`);e.message!==void 0&&j(e.message,"message");const t=Et[e.type];if(!t)throw new Error("Fatal error: validation function not found");t(e)},re=["Completion","PickUp","Elimination","Loyalty","Discover"],Qt={rezervbase:"reserve",bigmap:"customs",labs:"laboratory","56f40101d2720b2a4d8b45d6":"customs","55f2d3fd4bdc2d5f408b4567":"factory","5714dbc024597771384a510d":"interchange","5b0fc42d86f7744a585f9105":"laboratory","5704e4dad2720bb55b8b4567":"lighthouse","5704e5fad2720bc05b8b4567":"reserve","5704e554d2720bac5b8b456e":"shoreline","5704e3c2d2720bac5b8b4567":"woods"},fe={"":"any",bigmap:"customs",rezervbase:"reserve",labs:"laboratory"},w=e=>new Error(e),Lt=e=>re.includes(e),Mt=e=>{if(!!e){if(e.xp!==void 0&&typeof e.xp!="number")throw w("'rewards.xp' should be a number");if(e.items!==void 0&&typeof e.items!="object")throw w("'rewards.items' should be an object");Object.keys(e.items).forEach(t=>{if(typeof t!="string")throw w("invalid key found in 'rewards.items'")}),Object.values(e.items).forEach(t=>{if(typeof t!="number")throw w("invalid value found in 'rewards.items', it should be a number")})}},At=e=>{const t=e;if(!t.id||typeof t.id!="string")throw w("no valid 'id' found");if(!t.trader_id||typeof t.trader_id!="string")throw w("no valid 'trader_id' found");if(t.disabled!==void 0&&t.disabled!==!0&&t.disabled!==!1)throw w("'disabled' should be a boolean");if(t.descriptive_location!==void 0&&typeof t.descriptive_location!="string")throw w("'descriptive_location' should be a string");if(t.descriptive_location!==void 0&&!H.includes(t.descriptive_location))throw w(`unknown 'descriptive_location' : ${t.descriptive_location}`);if(t.type&&!Lt(t.type))throw w("invalid quest 'type' provided");if(t.image!==void 0&&typeof t.image!="string")throw w("'image' should be a string");if(t.name!==void 0&&j(t.name,"name"),t.description!==void 0&&j(t.description,"description"),t.success_message!==void 0&&j(t.success_message,"success_message"),t.level_needed!==void 0&&typeof t.level_needed!="number")throw w("'level_needed' should be a number");if(t.locked_by_quests&&!Array.isArray(t.locked_by_quests))throw w("'locked_by_quests' should be an array");if(t.locked_by_quests&&t.locked_by_quests.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'locked_by_quests' quest ids")}),t.unlock_on_quest_start&&!Array.isArray(t.unlock_on_quest_start))throw w("'unlock_on_quest_start' should be an array");if(t.unlock_on_quest_start&&t.unlock_on_quest_start.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'unlock_on_quest_start' quest ids")}),t.rewards!==void 0&&Mt(t.rewards),t.missions!==void 0&&!Array.isArray(t.missions))throw w("'missions' should be an array");t.missions?.forEach(n=>{Ct(n)})},Vt=e=>{const n=(Array.isArray(e)?e:[e]).map(i=>{const r=i.descriptive_location,s=i.missions??[];return{...i,missions:s.map(o=>o.locations&&o.locations.length?{...o,locations:o.locations.map(d=>fe[d]?fe[d]:d)}:o),descriptive_location:Qt[r??""]??r}});return n.forEach(i=>{At(i)}),n},Ot=v('<a target="_blank">: </a>'),Dt=v("<div><label></label><select></select></div>"),Tt=v("<option></option>"),V=e=>(()=>{const t=Dt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,u(U,{get fallback(){return[O(()=>e.fieldName),": "]},get children(){return u(q,{get when(){return e.fieldLink},get children(){const r=Ot.cloneNode(!0),s=r.firstChild;return r.style.setProperty("color","#7777FF"),_(r,()=>e.fieldName,s),p(()=>x(r,"href",e.fieldLink)),r}})}})),i.addEventListener("change",r=>e.onValueChanged(r.currentTarget.value)),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("width","180px"),_(i,u(L,{get each(){return e.values},children:r=>(()=>{const s=Tt.cloneNode(!0);return s.value=r,_(s,r),p(()=>s.selected=r===e.selectedValue),s})()})),p(r=>{const s=`form_${e.fieldName}`,o=e.formIndex;return s!==r._v$&&x(n,"for",r._v$=s),o!==r._v$2&&x(i,"tabindex",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),t})(),ge=["5a27c50f86f7740b3d65e16a","5a27c44386f7744237421af0","5a27cafa86f77424e20615d6","5a29221d86f77457303da9fa","5a29222486f77456f50d09e7","5ac4d8f186f774422237860d","5ac4d9aa86f7744784484abf","5ac4da0486f7744cc7701bdc","5ac4db0986f77442000164dd","5ac4dbb086f7743e7c61ca09","5ac4dc0486f77442000164e5","5ac4e02986f774617a185ef2","5ac4e06086f774623122ae42","5ac4e08086f774623122ae44","5ae4a7d286f7744748710d74","5ae4a7d986f7743fee0a75b2","5ae4a7dd86f77448464ed2b2","5ae4a74386f7744748710d72","5ae4a76086f774455f7d62d2","5ae325c586f77444fa45d0de","5ae326a086f77444fd36f5d8","5ae327a086f7745c7b3f2f38","5ae327e086f7742a4135935e","5ae3281c86f7745b3e3bf2d1","5ae3260986f7745b3e3bf2a7","5ae3274386f7745b4246b387","5b478d1b86f7744d1b23c60b","5b478eda86f77470315db899","5b4785f586f77470315db7ed","5b4786c586f7744d184ecabd","5b4787d086f7744d184ecb35","5b47863b86f7744d1c353203","5b47859886f7744d1b23c4f5","5b47867286f7744d1a393de9","5bc9fab686f7742a90020769","5bc481ec86f7740c8649a4f1","5c1e35cf86f7743b6242fe05","5c1e358f86f77408017f539f","5c7eb06188a4504aae56deb7","5d6e860186f774460f1f0602","5d6faf8f86f7743598553dd4","5d67b2a086f774131e206c05","5d67b3ed86f7744a2e70f15c","5d67b5ca86f7744dcc5e2f88","5d67b7ba86f774131e206c0c","5d67b41686f774368e1b78df","5d67b49186f774266f0867b3","5d67b66186f774266f0867b5","5d67bb8486f7744dcc5e2fb1","5d67c1e486f774131e206c3a","5d77a10586f7745041358b41","5d694a6b86f77452a94debdf","5d694c9086f77468c86a6ada","5d694cd886f77468c86a6adc","5d763d4886f774454e50d06d","5d6946c486f77452a8292cb2","5d6947c686f77452ac614b4b","5d6948e186f774238a38d8a7","5d69468a86f77452aa51d79d","5d66701986f7744a2e70f025","5d69470786f774238a38d844","5d69474486f77414077d1cc8","5d69483686f77414077d1cca","5e4d3a5186f77464185227f3","5e4d3a5886f77438b1632d82","5e383a6386f77465910ce1f3","5eda19f0edce541157209cee","5ee234c386f77447ee650e32","5f0f1f6c8f7810259b5fede0","5f0f202de269d61a4b5cf6ec","5fd9fad9c1ce6b1a3b486d00","57e4f1852459772a15635633","59bfebe686f7745ba3403da3","59c26dd986f77427033c3e83","59c26f2b86f7744a351903d3","59c133eb86f7740e7b544c71","59c273da86f77459b8017e7b","59c274ae86f77475060a9341","59c1285d86f77415042983dd","59c2729d86f77459c105de4d","59c2742286f77475ec568d92","59ca2e4186f77445e4732b22","60c373b71d348838124696ea","60c373e753bc0f18316351fe","60c375a0c2d86b57700e316b","60c3752d78280c17952e1e69","60c37450de6b0b44cc320e9a","60c37481c2d86b57700e3169","60c37416898b57521260e12a","60cb3814f09d61072d6cf211","61ab4ce156152b140448cf95","61ab4f090330382cea7bad57","61ab40a7edd0787ea26a69a6","61ab48bc5c890e40ca1a30f8","61ab383d3b7a0b53f515c515","61ab4381e4bbb01db226bce5","61ab38781b7da753125cfaa5","61ab421079c3a477d0121e46","61abc9240b56a53df32c6865","61abcd4c3b7a0b53f515c5e6","594d241f86f7740d8246218d","594d246986f77427fc3b2fb4","594d247486f77426ad2fd20b","594d248186f7740e670685db","596a20d286f7741ddb4815d5","596a108786f7741ddc2d31b1","596b453b86f77457c827bf44","596b465486f77457ca186188","597a0fad86f77426d464f995","597a172486f774799e5cd153","616d993bc8c5ad2ab30ff6ba","5968a09a86f7740d137ebfc5","5968ec2986f7741ddf17db83","5969f96786f7741dde183a4f","5979d3da86f774719f309082","5979d3ea86f7746d0b3e3fdc","5979d3f986f7746d08051ce0","5979d36d86f7746d093ddd7a","5979d37886f7746d0b3e3fdb","5979e80986f77437584fb8b2","5979ed4c86f7742f55674442","5979ef2a86f77431185415c3","5979f91c86f77402996bf9c2","5981c96e86f77477920d1a04","59675e7b86f77414b25fb049","59675f5486f77414b07f13d0","59689e1c86f7740d14064725","59689f8f86f7740d121082d7","60896b7bfa70fc097863b8f5","608974af4b05530f55550c21","5967532b86f77461fb2f333a","6089736efa70fc097863b8f6","5967505886f774590730dadc","5967611386f7741dfe4f46fb","5998365786f7745cb22fea42","6089743983426423753cd58a"],Ft="modulepreload",me={},Rt="/aki_CustomQuestsEditor/",jt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${Rt}${i}`,i in me)return;me[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Ft,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((d,l)=>{o.addEventListener("load",d),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},Bt=v('<input type="number" min="0">'),zt=v('<input type="button" value="Remove">'),Ut=v('<div><input type="text" placeholder="Search for item..."><div></div></div>'),Jt=v('<div><label></label><input placeholder="Type item id..." type="text"><input type="button"></div>'),Gt=v("<div></div>");let ke=[],xe={};jt(()=>import("./en.00a3b785.js"),[]).then(e=>{const t=e.default.templates;xe=t,ke=Object.keys(t).map(n=>[n,t[n]])});const Pe=e=>{const[t,n]=E(!1),[i,r]=E([]),s=$(()=>`${e.uniqQuestId}_${e.fieldName}_${String(e.index)}`);M(()=>(n(!1),r([]),s()));const o=$(()=>xe[e.value]?.Name??void 0);return(()=>{const d=Jt.cloneNode(!0),l=d.firstChild,a=l.nextSibling,f=a.nextSibling;return d.style.setProperty("padding","15px"),d.style.setProperty("background-color","grey"),l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l.style.setProperty("clear","left"),l.style.setProperty("width","180px"),l.style.setProperty("text-align","right"),l.style.setProperty("margin-right","10px"),_(l,()=>e.fieldName?`${e.fieldName} `:""),a.addEventListener("change",c=>e.onChange(c.currentTarget.value)),a.style.setProperty("width","320px"),_(d,u(N,{get when(){return e.onCounterChanged!==void 0},get children(){const c=Bt.cloneNode(!0);return c.$$input=g=>e.onCounterChanged?.(Number(g.currentTarget.value)),c.style.setProperty("width","100px"),p(()=>c.value=e.count),c}}),f),f.$$click=()=>{const c=t();c&&r([]),n(!c)},_(d,u(N,{get when(){return e.onRemove},get children(){const c=zt.cloneNode(!0);return c.$$click=()=>{r([]),n(!1),e.onRemove?.()},c}}),null),_(d,u(N,{get when(){return t()},get children(){const c=Ut.cloneNode(!0),g=c.firstChild,b=g.nextSibling;return c.style.setProperty("display","inline-block"),c.style.setProperty("padding","10px"),c.style.setProperty("margin-top","20px"),c.style.setProperty("margin-left","180px"),g.$$input=m=>{const h=m.currentTarget.value,I=ke.filter(([,C])=>typeof C!="object"?!1:C.Name.toLowerCase().includes(h.trim().toLowerCase())).map(([C,F])=>[C,F.Name]);r(Ve(50)(I))},b.style.setProperty("padding","10px"),b.style.setProperty("color","black"),_(b,u(L,{get each(){return i()},children:([m,h])=>(()=>{const I=Gt.cloneNode(!0);return I.$$click=()=>e.onChange(m),I.style.setProperty("cursor","pointer"),I.style.setProperty("margin","1px"),_(I,h),p(C=>{const F=m===e.value?"white":"inherit",B=m===e.value?"green":"white";return F!==C._v$5&&I.style.setProperty("color",C._v$5=F),B!==C._v$6&&I.style.setProperty("background-color",C._v$6=B),C},{_v$5:void 0,_v$6:void 0}),I})()})),c}}),null),p(c=>{const g=o(),b=t(),m=e.value,h=t()?"Ok":"Search...";return g!==c._v$&&x(a,"title",c._v$=g),b!==c._v$2&&(a.disabled=c._v$2=b),m!==c._v$3&&(a.value=c._v$3=m),h!==c._v$4&&(f.value=c._v$4=h),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),d})()};S(["input","click"]);const Wt=v('<div><label>rewards.items: </label><input type="button" value="Add item"></div>'),Kt=e=>{const t=$(()=>Object.keys(e.rewards));return(()=>{const n=Wt.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),i.style.setProperty("display","inline-block"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),i.style.setProperty("margin-bottom","10px"),r.$$click=()=>{e.updateRewards(s=>({...s,[""]:1}))},_(n,u(he,{get each(){return t()},children:(s,o)=>u(Pe,{index:o,get count(){return e.rewards[s()]??1},onCounterChanged:d=>e.updateRewards(ae(l=>{l[s()]=d})),fieldName:"",get uniqQuestId(){return`${e.uniqQuestId}_${o}`},get value(){return s()},onChange:d=>{e.updateRewards(ae(l=>{d!==s()&&(l[d]?l[d]+=l[s()]:l[d]=l[s()],delete l[s()])}))},onRemove:()=>{e.updateRewards(d=>Oe([s()],d))}})}),null),n})()};S(["click"]);const Zt=v('<div><label></label><input type="number"></div>'),z=e=>(()=>{const t=Zt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName),i.$$input=r=>e.setValue(Number(r.currentTarget.value)),p(r=>{const s=`form_${e.fieldName}`,o=e.min,d=e.max,l=e.value;return s!==r._v$&&x(n,"for",r._v$=s),o!==r._v$2&&x(i,"min",r._v$2=o),d!==r._v$3&&x(i,"max",r._v$3=d),l!==r._v$4&&(i.value=r._v$4=l),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})();S(["input"]);const Yt=v("<div><span>Choose a type of mission:</span><div></div></div>"),Ht=v('<input type="button">'),Xt=e=>(()=>{const t=Yt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("margin-bottom","5px"),t.style.setProperty("padding","15px"),t.style.setProperty("background-color","#333333"),t.style.setProperty("color","white"),n.style.setProperty("display","inline-block"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),_(i,u(L,{each:$e,children:r=>(()=>{const s=Ht.cloneNode(!0);return s.$$click=()=>e.onClickType(r),s.style.setProperty("margin-right","13px"),s.value=r,s})()})),t})();S(["click"]);const en=v('<div><label>accepted_items: </label><input type="button" value="Add item"></div>'),Ie=e=>(()=>{const t=en.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),i.$$click=()=>{e.updateItems(r=>[...r,""])},_(t,u(L,{get each(){return e.items},children:(r,s)=>u(Pe,{get index(){return s()},fieldName:"",get uniqQuestId(){return`${e.uniqId}_${s()}`},value:r,onChange:o=>{e.updateItems(d=>be(s(),o,d))},onRemove:()=>{e.updateItems(o=>J(s(),1,o))}})}),null),t})();S(["click"]);const tn=v('<div><label for="form_found_in_raid_only">found_in_raid_only: </label><input id="form_found_in_raid_only" type="checkbox"></div>'),nn=e=>{const t=$(()=>Boolean(e.mission.found_in_raid_only));return(()=>{const n=tn.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",s=>{e.updateMission(o=>({...o,found_in_raid_only:s.currentTarget.checked}))}),p(s=>{const o=e.formIndex,d=t();return o!==s._v$&&x(r,"tabindex",s._v$=o),d!==s._v$2&&(r.checked=s._v$2=d),s},{_v$:void 0,_v$2:void 0}),n})()},rn=e=>{const t=$(()=>`${e.questId}_give_item_${e.index}`),n=$(()=>e.mission.count??0);return[O(()=>e.children),u(A,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),u(z,{fieldName:"count",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,count:i}))}),u(nn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),u(Ie,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})]},sn=e=>{const t=$(()=>e.mission.target??"Savage"),n=$(()=>e.mission.count??1),i=$(()=>`${e.questId}_mission_kill_${e.index}`),r=$(()=>e.mission.locations??[]);return[O(()=>e.children),u(A,{formIndex:-1,updateQuestString:s=>e.updateMission(o=>({...o,message:s(o.message)})),get uniqId(){return i()},get questString(){return e.mission.message},fieldName:"message"}),u(V,{fieldName:"target",formIndex:18,values:pe,get selectedValue(){return t()},onValueChanged:s=>e.updateMission(o=>({...o,target:s}))}),u(z,{min:1,fieldName:"count",get value(){return n()},setValue:s=>e.updateMission(o=>({...o,count:s}))}),u(ne,{wordingButton:"locations",possibleValues:dt,get values(){return r()},updateValues:s=>{e.updateMission(o=>({...o,locations:s(r())}))},get uniqId(){return i()},fieldName:"locations"})]},ln=v('<label for="form_disabled">need_survive: </label>'),an=v('<input type="checkbox">'),we=e=>{const t=$(()=>e.mission.need_survive!==void 0&&e.mission.need_survive!=="null");return[(()=>{const n=ln.cloneNode(!0);return n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n})(),(()=>{const n=an.cloneNode(!0);return n.addEventListener("change",i=>{e.updateMission(r=>i.currentTarget.checked?{...r,need_survive:""}:{...r,need_survive:void 0})}),p(i=>{const r=`form_place_item_need_survive_${e.uniqId}`,s=t();return r!==i._v$&&x(n,"id",i._v$=r),s!==i._v$2&&(n.checked=i._v$2=s),i},{_v$:void 0,_v$2:void 0}),n})(),u(N,{get when(){return t()},get children(){return u(A,{fieldName:"survive message",formIndex:-1,get uniqId(){return e.uniqId},get questString(){return e.mission.need_survive},updateQuestString:n=>e.updateMission(i=>({...i,need_survive:n(i.need_survive)}))})}})]},W={bigmap:["gazel","place_peacemaker_007_N1","place_peacemaker_002_N1","place_peacemaker_002_N2","place_peacemaker_002_N3","extraction_zone_zibbo","fuel1","fuel2","fuel3","fuel4","place_skier_12_2","place_skier_11_3","Q019_3"],woods:["place_peacemaker_007_2_N2","place_peacemaker_007_2_N2_1","place_THX_15","bar_fuel3_1","bar_fuel3_2","bar_fuel3_3","place_skier_12_3","place_skier_11_2","huntsman_005_1","huntsman_005_2"],shoreline:["place_peacemaker_007_2_N3","place_peacemaker_008_2_N1","place_peacemaker_008_2_N2","place_peacemaker_003_N1","place_peacemaker_003_N2","place_peacemaker_003_N3","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","place_SIGNAL_03_1","place_SIGNAL_03_2","place_SIGNAL_03_3","place_peacemaker_001","ter_013_area_1","ter_013_area_2","ter_013_area_3","skier_022_area_1","skier_022_area_2","skier_022_area_3","prapor_022_area_1","prapor_022_area_2","prapor_022_area_3"],interchange:["place_WARBLOOD_04_1","place_WARBLOOD_04_2","place_WARBLOOD_04_3","place_skier_12_1","place_skier_11_1","place_merch_21_1","place_merch_21_2","place_merch_21_3","place_merch_020_1","place_merch_020_2"],factory:["place_SADOVOD_01_1","place_SADOVOD_01_2","case_extraction","ter_017_area_1"],lighthouse:["qlight_pr1_heli1_mark","qlight_mark_vech1","qlight_mark_vech2","qlight_mark_vech3","qlight_mark_vech4","qlight_fuel_blood","qlight_fuel_blood_bezovoz1","qlight_fuel_blood_bezovoz2","qlight_fuel_blood_bezovoz3","qlight16_peace_terra"],rezervbase:["tadeush_bmp2_area_mark_2","tadeush_bmp2_area_mark_11","tadeush_bmp2_area_mark_12","tadeush_bmp2_area_mark_13","tadeush_stryker_area_mark_3","baraholshik_fuel_area_2","baraholshik_fuel_area_3"]},Ne=Object.keys(W),on=e=>Ne.find(t=>W[t].includes(e)),dn=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),s=$(()=>W[t()]);return M(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,zone_id:W[t()][0]})),i())),M(o=>{if(o!==e.mission.zone_id){const d=on(e.mission.zone_id);d&&n(d)}return e.mission.zone_id}),[u(V,{fieldName:"map",formIndex:-1,values:Ne,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),u(V,{fieldName:"zone_id",fieldLink:"https://github.com/guillaumearm/aki_CustomQuests/blob/master/docs/ALL_ZONES.md",formIndex:-1,get values(){return s()},get selectedValue(){return e.mission.zone_id},onValueChanged:o=>{e.updateMission(d=>({...d,zone_id:o}))}})]},Y=e=>{const t=$(()=>`${e.questId}_place_item_${e.index}`),n=$(()=>e.mission.plant_time??30);return[O(()=>e.children),u(A,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),u(dn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),u(z,{fieldName:"plant_time",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,plant_time:i}))}),u(we,{get uniqId(){return t()},get mission(){return e.mission},updateMission:i=>e.updateMission(r=>i(r))}),u(N,{get when(){return e.mission.type==="PlaceItem"},get children(){return u(Ie,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})}})]},K={bigmap:["gazel","dead_posylni","vremyan_case","room206_water","vaz_feld","room114","room214","bomj_place","place_SADOVOD_03"],woods:["bunker2","ter_015_area_1","huntsman_001","pr_scout_col","pr_scout_base"],shoreline:["place_peacemaker_007_1_N1","place_peacemaker_010_3","place_peacemaker_004_N1","place_peacemaker_004_N2","place_peacemaker_009_2","place_peacemaker_009_3_N1","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","huntsman_026","place_peacemaker_008_4_N1","place_peacemaker_008_4_N2","place_peacemaker_001","place_SIGNAL_01_1","place_SIGNAL_01_2","place_meh_sanitar_room","huntsman_024_1","huntsman_024_2","huntsman_024_3","ter_023_area_1_1","ter_023_area_3_1","ter_023_area_2_1"],interchange:["place_SALE_03_AVOKADO","place_SALE_03_KOSTIN","place_SALE_03_TREND","place_SALE_03_DINO","place_SALE_03_TOPBRAND"],factory:["pumproom","place_pacemaker_SCOUT_01","place_pacemaker_SCOUT_02","place_pacemaker_SCOUT_03","ter_017_area_1","locked_office"],lighthouse:["qlight_pr1_heli1_find","qlight_hunt_fr_find","qlight_find_light_merchant","qlight_find_crushed_heli","qlight_find_scav_group1"],rezervbase:["huntsman_029","prapor_024_area_2","prapor_024_area_1","tadeush_bmp2_area_check_2","tadeush_bmp2_area_check_11","tadeush_bmp2_area_check_12","tadeush_bmp2_area_check_13","tadeush_stryker_area_check_3","tadeush_stryker_area_check_4","tadeush_t90_area_check_1","mechanik_exit_area_1","prapor_025_area_1","prapor_025_area_2","prapor_025_area_3","prapor_025_area_4","prapor_025_area_5","baraholshik_arsenal_area_1","baraholshik_dejurniy_area_2","baraholshik_arsenal_area_3","baraholshik_arsenal_area_4","baraholshik_arsenal_area_5"],laboratory:["peace_027_area"]},Se=Object.keys(K),un=e=>Se.find(t=>K[t].includes(e)),cn=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),s=$(()=>K[t()]);return M(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,place_id:K[t()][0]})),i())),M(o=>{if(o!==e.mission.place_id){const d=un(e.mission.place_id);d&&n(d)}return e.mission.place_id}),[u(V,{fieldName:"map",formIndex:-1,values:Se,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),u(V,{fieldName:"place_id",fieldLink:"https://github.com/guillaumearm/aki_CustomQuests/blob/master/docs/ALL_PLACES.md",formIndex:-1,get values(){return s()},get selectedValue(){return e.mission.place_id},onValueChanged:o=>{e.updateMission(d=>({...d,place_id:o}))}})]},_n=v("<br>"),fn=e=>[O(()=>e.children),u(A,{formIndex:-1,updateQuestString:t=>e.updateMission(n=>({...n,message:t(n.message)})),get uniqId(){return e.questId},get questString(){return e.mission.message},fieldName:"message"}),u(cn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),_n.cloneNode(!0),u(we,{get uniqId(){return e.questId},get mission(){return e.mission},updateMission:t=>e.updateMission(n=>t(n))})],gn=v("<h4> mission</h4>"),mn=v('<input type="button" value="Remove">'),yn=v('<input type="button" value="Up">'),vn=v('<input type="button" value="Down">'),ie=v("<div></div>"),hn=v('<input type="button" value="Add a mission...">'),bn=v('<div><input type="button" value="Cancel"></div>'),$n=e=>{const t=$(()=>[(()=>{const n=gn.cloneNode(!0),i=n.firstChild;return n.style.setProperty("margin","0"),n.style.setProperty("width","90%"),n.style.setProperty("display","inline-block"),_(n,()=>e.mission.type,i),n})(),(()=>{const n=mn.cloneNode(!0);return R(n,"click",e.onRemoveMission,!0),n.style.setProperty("top","0px"),n.style.setProperty("float","right"),n})(),(()=>{const n=yn.cloneNode(!0);return n.$$click=()=>e.onClickUp(e.index),p(()=>n.disabled=e.index===0),n})(),(()=>{const n=vn.cloneNode(!0);return n.$$click=()=>e.onClickDown(e.index),p(()=>n.disabled=e.index===e.nbMissions-1),n})()]);return(()=>{const n=ie.cloneNode(!0);return n.style.setProperty("padding","15px"),n.style.setProperty("background-color","#333333"),n.style.setProperty("color","white"),_(n,u(U,{get fallback(){return`Unknown mission type '${e.mission.type}'`},get children(){return[u(q,{get when(){return e.mission.type==="Kill"},get children(){return u(sn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="GiveItem"},get children(){return u(rn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceItem"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceBeacon"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceSignalJammer"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="VisitPlace"},get children(){return u(fn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}})]}})),n})()},pn=e=>{const[t,n]=E(!1),i=$(()=>e.quest.missions??[]),r=l=>{const a=St[l];e.updateQuest(f=>{const c=f.missions??[];return{...f,missions:[...c,a]}}),n(!1)},s=l=>{e.updateQuest(a=>{const f=a.missions??[];return{...a,missions:J(l,1,f)}})},o=l=>{e.updateQuest(a=>{const f=a.missions??[];return l===0?a:{...a,missions:G(l,l-1,f)}})},d=l=>{e.updateQuest(a=>{const f=a.missions??[];return l===f.length-1?a:{...a,missions:G(l,l+1,f)}})};return(()=>{const l=ie.cloneNode(!0);return l.style.setProperty("padding","15px"),_(l,u(he,{get each(){return i()},children:(a,f)=>(()=>{const c=ie.cloneNode(!0);return c.style.setProperty("padding","15px"),c.style.setProperty("background-color","grey"),_(c,u($n,{get nbMissions(){return i().length},onClickUp:o,onClickDown:d,get questId(){return e.quest.id},index:f,onRemoveMission:()=>s(f),updateMission:g=>e.updateQuest(b=>{const m=b.missions??[],h=be(f,g(a()),m);return{...b,missions:h}}),get mission(){return a()}})),c})()}),null),_(l,u(N,{get when(){return!t()},get children(){const a=hn.cloneNode(!0);return a.$$click=()=>n(!0),a}}),null),_(l,u(N,{get when(){return t()},get children(){const a=bn.cloneNode(!0),f=a.firstChild;return a.style.setProperty("padding","15px"),a.style.setProperty("background-color","grey"),f.$$click=()=>n(!1),_(a,u(Xt,{onClickType:r}),null),a}}),null),l})()};S(["click"]);const kn=v('<div id="quest_form"><div><h4>Quest configuration</h4><input type="button" value="UP"><input type="button" value="DOWN"><input type="button" value="Duplicate quest"><input type="button" value="Remove quest"></div><form><h2>Missions</h2></form></div>'),xn=["prapor","therapist","fence","skier","peacekeeper","mechanic","ragman","jaeger"],Pn=e=>{const t=$(()=>`${e.quest.id}_${e.questIndex}`),n=$(()=>e.quest.rewards?.items??{}),i=$(()=>e.quest.locked_by_quests??[]),r=$(()=>e.quest.unlock_on_quest_start??[]);return(()=>{const s=kn.cloneNode(!0),o=s.firstChild,d=o.firstChild,l=d.nextSibling,a=l.nextSibling,f=a.nextSibling,c=f.nextSibling,g=o.nextSibling,b=g.firstChild;return s.style.setProperty("border","1px solid black"),s.style.setProperty("margin","1px"),s.style.setProperty("padding","10px"),s.style.setProperty("width","60%"),s.style.setProperty("height","90%"),s.style.setProperty("overflow-y","scroll"),s.style.setProperty("background-color","lightgrey"),s.style.setProperty("float","left"),o.style.setProperty("padding","10px"),o.style.setProperty("background-color","grey"),d.style.setProperty("margin","0"),d.style.setProperty("text-align","center"),R(l,"click",e.onMoveUp,!0),l.style.setProperty("margin","0px"),R(a,"click",e.onMoveDown,!0),a.style.setProperty("margin","0px"),R(f,"click",e.onDupliacteQuest,!0),f.style.setProperty("margin","0px"),R(c,"click",e.onRemove,!0),c.style.setProperty("float","right"),c.style.setProperty("margin","0px"),g.addEventListener("submit",()=>{}),g.style.setProperty("margin-left","21px"),_(g,u(ct,oe({formIndex:2},e)),b),_(g,u(ft,oe({formIndex:4},e,{fieldName:"id"})),b),_(g,u(te,{formIndex:6,fieldName:"trader_id",get uniqId(){return t()},allValues:xn,get value(){return e.quest.trader_id},setValue:m=>e.updateQuest(h=>({...h,trader_id:m}))}),b),_(g,u(A,{formIndex:8,updateQuestString:m=>e.updateQuest(h=>({...h,name:m(h.name)})),get uniqId(){return t()},get questString(){return e.quest.name},fieldName:"name"}),b),_(g,u(A,{formIndex:10,updateQuestString:m=>e.updateQuest(h=>({...h,description:m(h.description)})),get uniqId(){return t()},get questString(){return e.quest.description},fieldName:"description"}),b),_(g,u(A,{formIndex:12,updateQuestString:m=>e.updateQuest(h=>({...h,success_message:m(h.success_message)})),get uniqId(){return t()},get questString(){return e.quest.success_message},fieldName:"success_message"}),b),_(g,u(V,{fieldName:"type",formIndex:14,values:re,get selectedValue(){return e.quest.type??re[0]},onValueChanged:m=>e.updateQuest(h=>({...h,type:m}))}),b),_(g,u(V,{fieldName:"descriptive_location",formIndex:16,values:H,get selectedValue(){return e.quest.descriptive_location??H[0]},onValueChanged:m=>e.updateQuest(h=>({...h,descriptive_location:m}))}),b),_(g,u(V,{fieldName:"image",formIndex:18,values:ge,get selectedValue(){return e.quest.image??ge[0]},onValueChanged:m=>e.updateQuest(h=>({...h,image:m}))}),b),_(g,u(z,{min:1,fieldName:"level_needed",get value(){return e.quest.level_needed??1},setValue:m=>e.updateQuest(h=>({...h,level_needed:m}))}),b),_(g,u(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return i()},updateValues:m=>e.updateQuest(h=>({...h,locked_by_quests:m(i())})),get uniqId(){return t()},fieldName:"locked_by_quests"}),b),_(g,u(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return r()},updateValues:m=>e.updateQuest(h=>({...h,unlock_on_quest_start:m(r())})),get uniqId(){return t()},fieldName:"unlock_on_quest_start"}),b),_(g,u(z,{fieldName:"rewards.xp",get value(){return e.quest.rewards?.xp??0},setValue:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,xp:m}}))}),b),_(g,u(Kt,{updateRewards:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,items:{...m(h.rewards?.items??{})}}})),get uniqQuestId(){return t()},get rewards(){return n()}}),b),_(g,u(pn,{get quest(){return e.quest},get updateQuest(){return e.updateQuest}}),null),p(m=>{const h=e.questIndex===0,I=e.questIndex===e.nbQuests-1;return h!==m._v$&&(l.disabled=m._v$=h),I!==m._v$2&&(a.disabled=m._v$2=I),m},{_v$:void 0,_v$2:void 0}),s})()};S(["click"]);const In=v("<div><div><h4></h4></div><ul></ul></div>"),wn=v('<input type="text">'),Nn=v('<input type="button" value="Ok">'),Sn=v("<li></li>"),qn=(e=!1,t=!1)=>{const n=()=>t&&e?"#606060":t?"#AAAAAA":e?"#303030":"inherit",i=()=>t?"inherit":e?"white":"inherit";return{"margin-bottom":"1px",border:"1px solid grey","text-align":"center","overflow-x":"scroll",cursor:"pointer","background-color":n(),color:i(),"text-decoration":t?"line-through":"inherit"}},qe=e=>(()=>{const t=In.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("border","1px solid black"),t.style.setProperty("margin","1px"),t.style.setProperty("padding","10px"),t.style.setProperty("width","15%"),t.style.setProperty("height","90%"),t.style.setProperty("overflow-y","scroll"),t.style.setProperty("float","left"),n.style.setProperty("text-align","center"),_(i,()=>e.title),r.style.setProperty("padding","0"),r.style.setProperty("padding-bottom","20px"),r.style.setProperty("white-space","nowrap"),_(r,()=>e.children),p(()=>t.style.setProperty("background-color",e.isDragging?"#505050":"lightgrey")),t})(),Ee=e=>{const[t,n]=E(e.text),[i,r]=E(Boolean(e.enableEdition&&e.text==="new_quest_file")),s=$(()=>`${e.index}_${Boolean(e.enableEdition)}`),o=()=>{e.onEditEnter?.(t(),e.index),r(!1)};return M(()=>{const d=document.getElementById(s());return d&&(d.focus(),d.select()),i()}),(()=>{const d=Sn.cloneNode(!0);return d.$$click=()=>e.onClick(),d.$$dblclick=()=>e.enableEdition&&!i()&&r(!0),_(d,u(U,{get children(){return[u(q,{get when(){return i()},get children(){return[(()=>{const l=wn.cloneNode(!0);return l.$$input=a=>n(a.currentTarget.value),l.addEventListener("keypress",a=>{a.key==="Enter"&&o()}),l.style.setProperty("width","80%"),p(a=>{const f=s(),c=t();return f!==a._v$&&x(l,"id",a._v$=f),c!==a._v$2&&(l.value=a._v$2=c),a},{_v$:void 0,_v$2:void 0}),l})(),(()=>{const l=Nn.cloneNode(!0);return l.$$click=()=>o(),l.style.setProperty("width","15%"),l})()]}}),u(q,{get when(){return!i()},get children(){return e.text}})]}})),p(l=>De(d,qn(e.selected,!!e.disabled),l)),d})()};S(["dblclick","click","input"]);const En=v('<div><input type="button" value="Create new file..."></div>'),Cn=e=>{const t=e.split(".json");return t.length>=2?se(1,t).join(".json"):e},Qn=e=>u(qe,{get isDragging(){return e.isDragging()},title:"Quest files",get children(){return[u(L,{get each(){return e.loadedJsonFiles},children:(t,n)=>u(Ee,{get index(){return n()},enableEdition:!0,get selected(){return n()===e.selectedFile},onClick:()=>e.onClickFile(n()),get onEditEnter(){return e.onEditFilename},get text(){return Cn(t.name)}})}),(()=>{const t=En.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewFile(),t})(),O(()=>e.children)]}});S(["click"]);const Ln=v('<div><input type="button" value="Remove quest file..."></div>'),Mn=v('<div><input type="button" value="Create new quest..."></div>'),An=e=>u(qe,{isDragging:!1,title:"Quests",get children(){return[u(L,{get each(){return e.file?.data},children:(t,n)=>u(Ee,{get index(){return n()},get disabled(){return Boolean(t.disabled)||t.id===""},get selected(){return n()===e.selectedQuest},onClick:()=>e.onClickQuest(n()),get text(){return t.id||"<no id>"}})}),O(()=>e.children),(()=>{const t=Mn.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewQuest(),_(t,u(N,{get when(){return(e.file?.data??[]).length===0},get children(){const i=Ln.cloneNode(!0),r=i.firstChild;return r.$$click=()=>e.onRemoveQuestFile(),i}}),null),t})()]}});S(["click"]);const Vn=v("<div></div>"),On=()=>({id:"",trader_id:"prapor"}),Dn="#737373",Tn="#b3b3b3",Fn={selections:{file:null,quest:0},files:[]},Rn=e=>{const t={};return e.forEach(n=>{n.data.forEach(i=>{t[i.id]=!0,i.locked_by_quests?.forEach(r=>{t[r]=!0}),i.unlock_on_quest_start?.forEach(r=>{t[r]=!0})})}),Object.keys(t)},ye=e=>{const t=e.split("_"),n=t[t.length-1];return le(NaN,Number(n))?null:Number(n)},ve=e=>{const t=e.split("_"),n=t[t.length-1];return le(NaN,Number(n))?null:se(1,t).join("_")},jn=(e,t)=>{let n=0;const i=e.split("_"),r=i[i.length-1];if(le(NaN,Number(r)))t.forEach(s=>{if(ve(s)===e){const o=ye(s);o!==null&&o>=n&&(n=o+1)}});else{const s=se(1,i).join("_");return n=Number(r),t.forEach(o=>{if(ve(o)===s){const d=ye(o);d!==null&&d>n&&(n=d)}}),s?`${s}_${n+1}`:String(n+1)}return e?`${e}_${n}`:String(n)},Bn=()=>{const[e,t]=Te(Fn),n=E(!1),[i]=n,r=$(()=>e.selections.quest),s=$(()=>e.files[e.selections.file??0]),o=$(()=>{const y=s();if(y)return y.data[e.selections.quest??0]}),d=$(()=>{const y=s();return y?y.data.length:0}),l=$(()=>e.selections.file!==null),a=$(()=>{const y=o(),k=e.selections.file,P=e.selections.quest;if(y&&k!==null&&P!==null)return D=>{t("files",k,"data",P,D)}}),f=()=>{const y=e.selections.file;if(y!==null){const k=e.files[y].data.length;t("files",y,"data",P=>[...P,On()]),t("selections","quest",k)}},c=()=>{const y=r(),k=e.selections.file;if(k!==null&&y!==null&&y>0){const P=y;t("files",k,"data",Q=>(t("selections","quest",()=>P-1),G(y,y-1)(Q)))}},g=()=>{const y=r(),k=e.selections.file;if(k!==null&&y!==null&&y<d()-1){const P=y;t("files",k,"data",Q=>(t("selections","quest",()=>P+1),G(y,y+1)(Q)))}},b=()=>{const y=r(),k=e.selections.file;if(k!==null&&y!==null){const P=y;t("files",k,"data",Q=>{if(P===Q.length-1){const D=P===0?null:P-1;t("selections","quest",()=>D)}return J(P,1,Q)})}},m=()=>{const y=r(),k=e.selections.file;if(k!==null&&y!==null){const P=e.files[k].data[y];if(P){const Q=e.files[k].data.map(T=>T.id),D=jn(P.id,Q);t("files",k,"data",T=>[...T,{...P,id:D}])}}},h=()=>{const y=e.selections.file;y!==null&&t("files",k=>{if(y===k.length-1){const P=y===0?null:y-1;t("selections","file",()=>P)}return J(y,1,k)})},I=(y,k)=>{y&&t("files",k,"name",`${y}.json`)},C=()=>{const y=e.files.length;t("files",k=>[...k,{name:"new_quest_file.json",data:[]}]),t("selections","file",y)},F=$(()=>Rn(e.files)),B=y=>{t("selections","file",y)},Qe=y=>{t("selections","quest",y)};return(()=>{const y=Vn.cloneNode(!0);return y.style.setProperty("overflow-x","scroll"),y.style.setProperty("height","100vh"),_(y,u(He,{get customQuestsVersion(){return de.custom_quests_target_version},get children(){return`Custom Quests Editor v${de.version}`}}),null),_(y,u(Xe,{isDraggingSignal:n,onDropJson:(k,P)=>{const D=e.files.length;try{const T=Vt(P);t("files",Le=>[...Le,{name:k,data:T}])}catch(T){console.warn(`Custom Quests Editor: Unable to load json quest file '${k}'`),console.error(`${T}`);return}e.selections.file===null&&B(D)}}),null),_(y,u(Qn,{onEditFilename:I,onCreateNewFile:C,isDragging:i,onClickFile:B,get loadedJsonFiles(){return e.files},get selectedFile(){return e.selections.file},get children(){return u(N,{get when(){return l()},get children(){return u(lt,{tabIndex:-1,get loadedJsonFiles(){return e.files},get selectedQuestFile(){return e.selections.file}})}})}}),null),_(y,u(N,{get when(){return l()},get children(){return u(An,{onRemoveQuestFile:h,onCreateNewQuest:f,onClickQuest:Qe,get file(){return s()},get selectedQuest(){return e.selections.quest}})}}),null),_(y,u(N,{get when(){return O(()=>o()!==void 0,!0)()&&a()!==void 0},get children(){return u(Pn,{get nbQuests(){return d()},onMoveUp:c,onMoveDown:g,onRemove:b,onDupliacteQuest:m,get allQuestIds(){return F()},get questIndex(){return r()},get quest(){return o()},get updateQuest(){return a()}})}}),null),p(()=>y.style.setProperty("background-color",i()?Dn:Tn)),y})()},Ce=document.getElementById("root");if(!Ce)throw new Error("Fatal: no div #root found in the DOM");Fe(()=>u(Bn,{}),Ce);
