import{t as y,i as _,o as Ve,c as p,a as $,s as x,p as ze,d as S,b as L,e as E,f as c,M as N,g as B,F as A,S as U,h as w,m as V,j as De,k as de,l as Te,I as pe,u as $e,r as J,n as G,q as ce,v as Be,w as se,x as Fe,y as ae,z as Re}from"./vendor.8732934f.js";const je=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};je();const Ue="spt-custom-quests-editor",Je="1.3.0",Ge="3.2.0",We="Online editor for Custom Quests mod (Single Player Tarkov)",Ke={start:"vite",dev:"vite",build:"vite build","build:production":"vite build --base=/SPT_CustomQuestsEditor/",serve:"vite preview",lint:"eslint .  --max-warnings 0 --ext .ts,.tsx,.js","lint:all":"npm run lint && npm run prettier:check",prettier:"prettier --write .","prettier:check":"prettier --check .","test:all":"npm run lint:all && npm run tsc && npm run build",tsc:"tsc -p . --noEmit",deploy:"npm run lint:all && npm run tsc && npm run build:production && npm run gh-pages","gh-pages":"gh-pages -d dist -b gh-pages",clean:"rimraf dist"},Ze="MIT",He={"@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0",eslint:"^8.10.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3",prettier:"^2.5.1",rimraf:"^3.0.2",typescript:"^4.6.2",vite:"^2.8.6","vite-plugin-solid":"^2.2.6"},Ye={"@types/ramda":"^0.28.1",ramda:"^0.28.0","solid-js":"^1.3.11"};var ue={name:Ue,version:Je,custom_quests_target_version:Ge,description:We,scripts:Ke,license:Ze,devDependencies:He,dependencies:Ye};const Xe=y("<h2></h2>"),et=y('<h4>For <a target="_blank" href="https://hub.sp-tarkov.com/files/file/588-custom-quests/">Custom Quests</a> v</h4>'),tt=e=>[(()=>{const t=Xe.cloneNode(!0);return t.style.setProperty("text-align","center"),_(t,()=>e.children),t})(),(()=>{const t=et.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return i.nextSibling,t.style.setProperty("position","absolute"),t.style.setProperty("margin","0"),t.style.setProperty("right","10px"),t.style.setProperty("top","6px"),i.style.setProperty("color","blue"),_(t,()=>e.customQuestsVersion,null),t})()],_e=()=>{},nt=e=>{const t=e.onDropJson??_e,n=e.onDropInvalidJson??_e,[,i]=e.isDraggingSignal;i(!1);const r=document.getElementById("root");if(!r)return console.error("no root element found"),null;const s=l=>{i(!0),l.preventDefault()},o=l=>{i(!1),l.preventDefault()},d=l=>{i(!0),l.preventDefault()},a=l=>{if(i(!1),l.dataTransfer){const f=l.dataTransfer.files[0],u=new FileReader;u.onloadend=function(){if(typeof this.result=="string")try{const g=JSON.parse(this.result);t(f.name,g)}catch(g){n(g)}},u.readAsText(l.dataTransfer.files[0])}l.preventDefault()};return r.addEventListener("dragenter",s),r.addEventListener("dragleave",o),r.addEventListener("dragover",d),r.addEventListener("drop",a),Ve(()=>{r.removeEventListener("dragenter",s),r.removeEventListener("dragleave",o),r.removeEventListener("dragover",d),r.removeEventListener("drop",a)}),null},rt=y('<a><button type="button"></button></a>'),it=e=>e.filter(t=>t.id!==""),st=e=>e.map(t=>{if(t.rewards&&t.rewards.items){const n={},i=t.rewards.items;return Object.keys(i).forEach(r=>{r!==""&&(n[r]=i[r])}),{...t,rewards:{...t.rewards,items:n}}}return t}),at=e=>e.map(t=>{if(t.missions){const n=t.missions.map(i=>"accepted_items"in i?{...i,accepted_items:i.accepted_items.filter(r=>Boolean(r))}:i);return{...t,missions:n}}return t}),lt=e=>ze(st,it,at)(e),ot=e=>{const t=lt(e);return"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,void 0,4))},dt=e=>{const t=p(()=>e.loadedJsonFiles[e.selectedQuestFile??-1]),n=p(()=>t()?.name??""),i=p(()=>ot(t()?.data??[]));return(()=>{const r=rt.cloneNode(!0),s=r.firstChild;return _(s,()=>`Download ${n()}`),$(o=>{const d=n(),a=i(),l=e.tabIndex;return d!==o._v$&&x(r,"download",o._v$=d),a!==o._v$2&&x(r,"href",o._v$2=a),l!==o._v$3&&x(s,"tabindex",o._v$3=l),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()},ct={any:!0,customs:!0,factory:!0,laboratory:!0,interchange:!0,lighthouse:!0,reserve:!0,shoreline:!0,woods:!0,streets:!0,groundzero:!0},ut={any:!0,customs:!0,factory:!0,factory4_day:!0,factory4_night:!0,laboratory:!0,interchange:!0,lighthouse:!0,reserve:!0,shoreline:!0,woods:!0,streets:!0,groundzero:!0},_t=Object.keys(ut),Y=Object.keys(ct),ft=y('<div><label for="form_disabled">enabled: </label><input id="form_disabled" type="checkbox"></div>'),gt=e=>{const t=p(()=>!e.quest.disabled);return(()=>{const n=ft.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",s=>{e.updateQuest(o=>({...o,disabled:!s.currentTarget.checked}))}),$(s=>{const o=e.formIndex,d=t();return o!==s._v$&&x(r,"tabindex",s._v$=o),d!==s._v$2&&(r.checked=s._v$2=d),s},{_v$:void 0,_v$2:void 0}),n})()},mt=y('<div><label>: </label><input type="text"></div>'),bt=e=>(L(()=>{if(e.fieldName==="id"&&!e.quest.id){const t=document.getElementById(`form_${e.fieldName}`);t&&t.focus()}return e.quest.id}),(()=>{const t=mt.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName,i),r.$$input=s=>e.updateQuest(o=>({...o,[e.fieldName]:s.currentTarget.value})),r.style.setProperty("display","inline-block"),r.style.setProperty("float","left"),$(s=>{const o=`form_${e.fieldName}`,d=e.quest[e.fieldName],a=`form_${e.fieldName}`,l=e.formIndex;return o!==s._v$&&x(n,"for",s._v$=o),d!==s._v$2&&(r.value=s._v$2=d),a!==s._v$3&&x(r,"id",s._v$3=a),l!==s._v$4&&x(r,"tabindex",s._v$4=l),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})());S(["input"]);const X=["ch","cz","en","es-mx","es","fr","ge","hu","it","jp","kr","pl","po","ro","ru","sk","tu"],ee=e=>X.includes(e),yt=e=>{if(typeof e=="string")return null;if(e){let t=!0;if(Object.keys(e).forEach(n=>{ee(n)||(t=!1)}),!t)return"Unknown locale names found"}return null},F=(e,t)=>{const n=yt(e);if(n!==null)throw new Error(`${n} for '${t}'`)},ht=y('<select><option value="set_locale">Set locale...</option></select>'),vt=y("<select></select>"),pt=y('<div><label>: </label><input type="text"></div>'),fe=y("<option></option>"),M=e=>{const[t,n]=E(null);L(a=>{if(a!==e.uniqId&&typeof e.questString=="object"){const l=Object.keys(e.questString)[0]??null;l&&n(l)}return e.uniqId});const i=a=>l=>{const f=l.currentTarget.value;ee(f)&&(n(f),e.updateQuestString(()=>({[f]:a})))},r=a=>{const l=a.currentTarget.value;ee(l)&&n(l)},s=p(()=>{if(typeof e.questString=="string")return e.questString;const a=t();return a&&typeof e.questString=="object"?e.questString[a]??"":""}),o=a=>{const l=a.currentTarget.value;if(typeof e.questString=="string"||e.questString===void 0){e.updateQuestString(()=>l);return}const f=t();f&&typeof e.questString=="object"&&e.updateQuestString(u=>!u||typeof u=="string"?{[f]:l}:{...u,[f]:l})},d=a=>typeof e.questString=="object"&&e.questString[a]?` : ${e.questString[a]}`:"";return(()=>{const a=pt.cloneNode(!0),l=a.firstChild,f=l.firstChild,u=l.nextSibling;return a.style.setProperty("padding-left","15px"),a.style.setProperty("padding-top","15px"),l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l.style.setProperty("clear","left"),l.style.setProperty("width","180px"),l.style.setProperty("text-align","right"),l.style.setProperty("margin-right","10px"),_(l,()=>e.fieldName,f),u.$$input=o,u.style.setProperty("display","inline-block"),u.style.setProperty("float","left"),u.style.setProperty("width","180px"),_(a,c(U,{get children(){return[c(N,{get when(){return typeof e.questString=="string"||e.questString===void 0},get children(){const g=ht.cloneNode(!0);return g.firstChild,B(g,"change",i(e.questString)),_(g,c(A,{each:X,children:v=>(()=>{const m=fe.cloneNode(!0);return m.value=v,_(m,v),m})()}),null),$(()=>x(g,"tabindex",e.formIndex+1)),g}}),c(N,{get when(){return typeof e.questString=="object"},get children(){const g=vt.cloneNode(!0);return g.addEventListener("change",r),g.style.setProperty("max-width","180px"),_(g,c(A,{each:X,children:v=>(()=>{const m=fe.cloneNode(!0);return m.value=v,_(m,v,null),_(m,()=>d(v),null),$(()=>m.selected=t()===v),m})()})),$(()=>x(g,"tabindex",e.formIndex+1)),g}})]}}),null),$(g=>{const v=`form_${e.fieldName}`,m=e.formIndex,h=s(),q=`form_${e.fieldName}`;return v!==g._v$&&x(l,"for",g._v$=v),m!==g._v$2&&x(u,"tabindex",g._v$2=m),h!==g._v$3&&(u.value=g._v$3=h),q!==g._v$4&&x(u,"id",g._v$4=q),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),a})()};S(["input"]);const $t=y("<label></label>"),kt=y('<input type="text">'),xt=y('<input type="button" value="Ok">'),Pt=y("<select></select>"),It=y('<input type="button" value="Edit manually...">'),qt=y("<div></div>"),wt=y("<option></option>"),te=e=>{const[t,n]=E(!1);L(d=>(d!==e.uniqId&&n(!1),e.uniqId));const i=p(()=>{const d=[...e.allValues];return d.includes(e.value)||d.push(e.value),d}),r=d=>{const a=d.currentTarget.value;e.setValue?.(a),e.onSelectValue?.(a)},s=p(()=>`form_generic_dropdown_id_${e.fieldName}_${e.formIndex}`),o=()=>{const d=document.getElementById(s());d&&e.onSelectValue?.(d.value),n(!1)};return(()=>{const d=qt.cloneNode(!0);return _(d,c(w,{get when(){return Boolean(e.fieldName)},get children(){const a=$t.cloneNode(!0);return a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("clear","left"),a.style.setProperty("width","180px"),a.style.setProperty("text-align","right"),a.style.setProperty("margin-right","10px"),_(a,()=>`${e.fieldName}: `),$(()=>x(a,"for",s())),a}}),null),_(d,c(U,{get children(){return[c(N,{get when(){return t()},get children(){return[(()=>{const a=kt.cloneNode(!0);return a.addEventListener("keypress",l=>{l.key==="Enter"&&o()}),a.$$input=l=>{const f=l.currentTarget.value;f&&e.setValue?.(f)},a.autofocus=!0,a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("width","180px"),$(l=>{const f=s(),u=e.formIndex;return f!==l._v$&&x(a,"id",l._v$=f),u!==l._v$2&&x(a,"tabindex",l._v$2=u),l},{_v$:void 0,_v$2:void 0}),a})(),(()=>{const a=xt.cloneNode(!0);return a.$$click=()=>{o()},a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),$(()=>x(a,"tabindex",e.formIndex+1)),a})()]}}),c(N,{get when(){return!t()},get children(){return[(()=>{const a=Pt.cloneNode(!0);return a.addEventListener("change",r),a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("width","180px"),_(a,c(A,{get each(){return i()},children:l=>(()=>{const f=wt.cloneNode(!0);return f.value=l,_(f,l),$(()=>f.selected=l===e.value),f})()})),$(()=>x(a,"tabindex",e.formIndex)),a})(),c(w,{get when(){return e.editable},get children(){const a=It.cloneNode(!0);return a.$$click=()=>{n(!0);const l=document.getElementById(s());l&&l.focus()},a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),$(()=>x(a,"tabindex",e.formIndex+1)),a}})]}})]}}),null),_(d,()=>e.children,null),$(()=>d.style.setProperty("padding",e.paddingValue?`${e.paddingValue}px`:"15px")),d})()};S(["input","click"]);const St=y('<input type="button" value="Cancel">'),Nt=y('<div><label></label><input type="button" tabindex="-1"><div></div></div>'),Et=y('<input type="button" value="Remove">'),ne=e=>{const[t,n]=E(!1),i=p(()=>`${e.uniqId}_${e.fieldName}`),r=p(()=>(e.possibleValues??[]).filter(s=>!e.values.includes(s)));return(()=>{const s=Nt.cloneNode(!0),o=s.firstChild,d=o.nextSibling,a=d.nextSibling;return s.style.setProperty("padding","15px"),o.style.setProperty("display","inline-block"),o.style.setProperty("float","left"),o.style.setProperty("clear","left"),o.style.setProperty("width","180px"),o.style.setProperty("text-align","right"),o.style.setProperty("margin-right","10px"),_(o,()=>`${e.fieldName}: `),d.$$click=()=>{n(!0)},a.style.setProperty("padding-left","180px"),_(a,c(w,{get when(){return t()},get children(){return c(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_add`},get allValues(){return r()},get value(){return`Select ${e.wordingButton} id...`},onSelectValue:l=>(n(!1),e.updateValues(f=>[l,...f])),get children(){const l=St.cloneNode(!0);return l.$$click=()=>{n(!1)},l.style.setProperty("display","inline-block"),l.style.setProperty("float","left"),l}})}}),null),_(a,c(A,{get each(){return e.values},children:(l,f)=>c(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_${f()}`},get allValues(){return r()},value:l,onSelectValue:u=>{e.updateValues(g=>g.map((v,m)=>m===f()?u:v))},get children(){const u=Et.cloneNode(!0);return u.$$click=()=>e.updateValues(g=>g.filter((v,m)=>m!==f())),u.style.setProperty("display","inline-block"),u.style.setProperty("float","left"),u}})}),null),$(l=>{const f=t(),u=`Add ${e.wordingButton} id...`;return f!==l._v$&&(d.disabled=l._v$=f),u!==l._v$2&&(d.value=l._v$2=u),l},{_v$:void 0,_v$2:void 0}),s})()};S(["click"]);const Ct={Kill:{type:"Kill"},GiveItem:{type:"GiveItem",accepted_items:[]},PlaceItem:{type:"PlaceItem",accepted_items:[],zone_id:"gazel"},PlaceBeacon:{type:"PlaceBeacon",zone_id:"gazel"},PlaceSignalJammer:{type:"PlaceSignalJammer",zone_id:"gazel"},VisitPlace:{type:"VisitPlace",place_id:"gazel"}},ke=["Kill","GiveItem","PlaceItem","PlaceBeacon","PlaceSignalJammer","VisitPlace"],xe=["Savage","AnyPmc","Usec","Bear"],Qt=e=>{if(e.locations!==void 0&&!Array.isArray(e.locations))throw new Error("invalid kill mission: 'locations' should be an array");(e.locations||[]).forEach(n=>{if(!n||typeof n!="string")throw new Error("invalid location found in kill mission")})},ge=e=>{if(!Array.isArray(e.accepted_items))throw new Error("invalid GiveItem 'accepted_items' field is missing or invalid for GiveItem mission");e.accepted_items.forEach(t=>{if(!t||typeof t!="string")throw new Error("invalid GiveItem 'accepted_items': ids should be a string")})},Z=e=>{if(!e.zone_id||typeof e.zone_id!="string")throw new Error("invalid given zone_id for mission");if(e.plant_time!==void 0&&typeof e.plant_time!="number")throw new Error("invalid plant_time type for mission, it should be a number");e.need_survive!==void 0&&F(e.need_survive,"need_survive")},Lt={Kill:e=>{if(e.target!==void 0&&!xe.includes(e.target))throw new Error(`invalid kill mission target '${e.target}'`);if(Qt(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid kill mission 'count', it should be a number")},GiveItem:e=>{if(ge(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid GiveItem mission 'count', it should be a number");if(e.found_in_raid_only!==void 0&&typeof e.found_in_raid_only!="boolean")throw new Error("invalid GiveItem mission 'found_in_raid_only', it should be a boolean")},PlaceItem:e=>{Z(e),ge(e)},PlaceBeacon:e=>{Z(e)},PlaceSignalJammer:e=>{Z(e)},VisitPlace:e=>{if(!e.place_id||typeof e.place_id!="string")throw new Error("invalid given place_id for mission");e.need_survive!==void 0&&F(e.need_survive,"need_survive")}},At=e=>{if(typeof e!="object")throw new Error("invalid mission, it should be an object");if(!ke.includes(e.type))throw new Error(`invalid mission 'type' field: '${e.type}'`);e.message!==void 0&&F(e.message,"message");const t=Lt[e.type];if(!t)throw new Error("Fatal error: validation function not found");t(e)},le=e=>e.type==="@build",Mt=e=>{if(!le(e))throw P("'@build' directive: not a valid item");if(e.attachments!==void 0&&typeof e.attachments!="object")throw P("'@build' directive: item 'attachments' should be an object");if(e.id===void 0)throw P("'@build' directive: no 'id' found");if(e.item===void 0)throw P("'' directive: no 'item' property found");return!0},oe=e=>e.type==="@group",Ot=e=>{if(!oe(e))throw P("'@htoup' directive: not a valid item");if(e.id===void 0)throw P("'@group' directive: no 'id' found");if(e.items!==void 0&&!Array.isArray(e.items))throw P("'@group' directive: no valid 'items' array found");return!0},Vt=e=>!le(e)&&!oe(e),re=["Completion","PickUp","Elimination","Loyalty","Discover"],zt={rezervbase:"reserve",bigmap:"customs",labs:"laboratory","56f40101d2720b2a4d8b45d6":"customs","55f2d3fd4bdc2d5f408b4567":"factory","5714dbc024597771384a510d":"interchange","5b0fc42d86f7744a585f9105":"laboratory","5704e4dad2720bb55b8b4567":"lighthouse","5704e5fad2720bc05b8b4567":"reserve","5704e554d2720bac5b8b456e":"shoreline","5704e3c2d2720bac5b8b4567":"woods","5714dc692459777137212e12":"streets","653e6760052c01c1c805532f":"groundzero"},me={"":"any",bigmap:"customs",factory4_day:"factory",factory4_night:"factory",rezervbase:"reserve",labs:"laboratory",tarkovstreets:"streets",sandbox:"groundzero",sandbox_high:"groundzero"},P=e=>new Error(e),Dt=e=>re.includes(e),Tt=e=>{if(!!e){if(e.xp!==void 0&&typeof e.xp!="number")throw P("'rewards.xp' should be a number");if(e.items!==void 0&&typeof e.items!="object")throw P("'rewards.items' should be an object");Object.keys(e.items).forEach(t=>{if(typeof t!="string")throw P("invalid key found in 'rewards.items'")}),Object.values(e.items).forEach(t=>{if(typeof t!="number")throw P("invalid value found in 'rewards.items', it should be a number")})}},Bt=e=>{const t=e;if(!t.id||typeof t.id!="string")throw P("no valid 'id' found");if(!t.trader_id||typeof t.trader_id!="string")throw P("no valid 'trader_id' found");if(t.disabled!==void 0&&t.disabled!==!0&&t.disabled!==!1)throw P("'disabled' should be a boolean");if(t.descriptive_location!==void 0&&typeof t.descriptive_location!="string")throw P("'descriptive_location' should be a string");if(t.descriptive_location!==void 0&&!Y.includes(t.descriptive_location))throw P(`unknown 'descriptive_location' : ${t.descriptive_location}`);if(t.type&&!Dt(t.type))throw P("invalid quest 'type' provided");if(t.image!==void 0&&typeof t.image!="string")throw P("'image' should be a string");if(t.name!==void 0&&F(t.name,"name"),t.description!==void 0&&F(t.description,"description"),t.success_message!==void 0&&F(t.success_message,"success_message"),t.level_needed!==void 0&&typeof t.level_needed!="number")throw P("'level_needed' should be a number");if(t.locked_by_quests&&!Array.isArray(t.locked_by_quests))throw P("'locked_by_quests' should be an array");if(t.locked_by_quests&&t.locked_by_quests.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'locked_by_quests' quest ids")}),t.unlock_on_quest_start&&!Array.isArray(t.unlock_on_quest_start))throw P("'unlock_on_quest_start' should be an array");if(t.unlock_on_quest_start&&t.unlock_on_quest_start.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'unlock_on_quest_start' quest ids")}),t.rewards!==void 0&&Tt(t.rewards),t.missions!==void 0&&!Array.isArray(t.missions))throw P("'missions' should be an array");t.missions?.forEach(n=>{At(n)})},Ft=e=>{const n=(Array.isArray(e)?e:[e]).map(i=>{const r=i.descriptive_location,s=i.missions??[];return{...i,missions:s.map(o=>o.locations&&o.locations.length?{...o,locations:o.locations.map(d=>me[d]?me[d]:d)}:o),descriptive_location:zt[r??""]??r}});return n.forEach(i=>{le(i)?Mt(i):oe(i)?Ot(i):Bt(i)}),n},Rt=y('<a target="_blank">: </a>'),jt=y("<div><label></label><select></select></div>"),Ut=y("<option></option>"),O=e=>(()=>{const t=jt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,c(U,{get fallback(){return[V(()=>e.fieldName),": "]},get children(){return c(N,{get when(){return e.fieldLink},get children(){const r=Rt.cloneNode(!0),s=r.firstChild;return r.style.setProperty("color","#7777FF"),_(r,()=>e.fieldName,s),$(()=>x(r,"href",e.fieldLink)),r}})}})),i.addEventListener("change",r=>e.onValueChanged(r.currentTarget.value)),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("width","180px"),_(i,c(A,{get each(){return e.values},children:r=>(()=>{const s=Ut.cloneNode(!0);return s.value=r,_(s,r),$(()=>s.selected=r===e.selectedValue),s})()})),$(r=>{const s=`form_${e.fieldName}`,o=e.formIndex;return s!==r._v$&&x(n,"for",r._v$=s),o!==r._v$2&&x(i,"tabindex",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),t})(),be=["5a27c50f86f7740b3d65e16a","5a27c44386f7744237421af0","5a27cafa86f77424e20615d6","5a29221d86f77457303da9fa","5a29222486f77456f50d09e7","5ac4d8f186f774422237860d","5ac4d9aa86f7744784484abf","5ac4da0486f7744cc7701bdc","5ac4db0986f77442000164dd","5ac4dbb086f7743e7c61ca09","5ac4dbb086f7743e7c61ca09","5ac4dc0486f77442000164e5","5ac4e02986f774617a185ef2","5ac4e06086f774623122ae42","5ac4e08086f774623122ae44","5ae4a7d286f7744748710d74","5ae4a7d986f7743fee0a75b2","5ae4a7dd86f77448464ed2b2","5ae4a74386f7744748710d72","5ae4a76086f774455f7d62d2","5ae325c586f77444fa45d0de","5ae326a086f77444fd36f5d8","5ae327a086f7745c7b3f2f38","5ae327e086f7742a4135935e","5ae3281c86f7745b3e3bf2d1","5ae3260986f7745b3e3bf2a7","5ae3274386f7745b4246b387","5b478d1b86f7744d1b23c60b","5b478eda86f77470315db899","5b4785f586f77470315db7ed","5b4786c586f7744d184ecabd","5b4786c586f7744d184ecabd","5b4787d086f7744d184ecb35","5b47863b86f7744d1c353203","5b47859886f7744d1b23c4f5","5b47867286f7744d1a393de9","5b47867286f7744d1a393de9","5bc9fab686f7742a90020769","5bc481ec86f7740c8649a4f1","5c1e35cf86f7743b6242fe05","5c1e358f86f77408017f539f","5c7eb06188a4504aae56deb7","5d6e860186f774460f1f0602","5d6faf8f86f7743598553dd4","5d67b2a086f774131e206c05","5d67b3ed86f7744a2e70f15c","5d67b5ca86f7744dcc5e2f88","5d67b7ba86f774131e206c0c","5d67b41686f774368e1b78df","5d67b49186f774266f0867b3","5d67b66186f774266f0867b5","5d67bb8486f7744dcc5e2fb1","5d67c1e486f774131e206c3a","5d77a10586f7745041358b41","5d694a6b86f77452a94debdf","5d694c9086f77468c86a6ada","5d694cd886f77468c86a6adc","5d763d4886f774454e50d06d","5d6946c486f77452a8292cb2","5d6947c686f77452ac614b4b","5d6948e186f774238a38d8a7","5d69468a86f77452aa51d79d","5d66701986f7744a2e70f025","5d69470786f774238a38d844","5d69474486f77414077d1cc8","5d69483686f77414077d1cca","5e4d3a5186f77464185227f3","5e4d3a5886f77438b1632d82","5e383a6386f77465910ce1f3","5eda19f0edce541157209cee","5ee234c386f77447ee650e32","5f0f1f6c8f7810259b5fede0","5f0f202de269d61a4b5cf6ec","5fd9fad9c1ce6b1a3b486d00","57e4f1852459772a15635633","59bfebe686f7745ba3403da3","59c26dd986f77427033c3e83","59c26f2b86f7744a351903d3","59c133eb86f7740e7b544c71","59c273da86f77459b8017e7b","59c273da86f77459b8017e7b","59c274ae86f77475060a9341","59c1285d86f77415042983dd","59c2729d86f77459c105de4d","59c2742286f77475ec568d92","59ca2e4186f77445e4732b22","60c373b71d348838124696ea","60c373e753bc0f18316351fe","60c375a0c2d86b57700e316b","60c3752d78280c17952e1e69","60c37450de6b0b44cc320e9a","60c37481c2d86b57700e3169","60c375171d348838124696ed","60c37416898b57521260e12a","60c37700869a2f761e41b35b","60cb3814f09d61072d6cf211","61ab3ad15c890e40ca1a30f5","61ab4ce156152b140448cf95","61ab4f090330382cea7bad57","61ab40a7edd0787ea26a69a6","61ab41d128f39305480d0916","61ab48bc5c890e40ca1a30f8","61ab383d3b7a0b53f515c515","61ab4381e4bbb01db226bce5","61ab38781b7da753125cfaa5","61ab421079c3a477d0121e46","61abc9240b56a53df32c6865","61abcd4c3b7a0b53f515c5e6","62bd61b1b818ff064405b827","63a90faa64b9631d9178271e","63a90fd7c31b00242d28a92e","63a98e8bc593cc01b37133a9","63a938b387c76a25c912120f","63a944c0c593cc01b3713331","63a992c6655ec5555b4aa9ec","63a9300d64b9631d91782720","63a92732813bba58a50c9e93","63a93845813bba58a50c9e95","63a94151655ec5555b4aa9af","63aae96a435ab5742b4e407a","63aae950f83fd6083938904c","63aae970f83fd6083938904e","63aae95961d7b024e808cc5c","63aae9481287ef0b827d0bef","63aae9613606f31cf40e5a7b","63aaeaa987413d64ae0ac1a9","63aaec53e842787ad21356a3","63aaf76c435ab5742b4e4092","63aaf63861d7b024e808d5fb","63ab02b8972364554162a22e","63ab032d435ab5742b4e40aa","63ab063eb4313a7bac606703","63ab1e9b972364554162a232","63ab1e59f83fd608393890af","63ab1f1676588f3cf341c460","63ab130a160cc610ba035e08","63ab182c87413d64ae0ac20c","63ab1047160cc610ba035e05","63ab1282435ab5742b4e40ac","64a2c8e0e4c3b3082302e5bd","64a2c939d73e87e12400432b","64a5b5190724bc4b981f5105","64c3cd095b03dccf8800271f","64f8b5fb7d39ff0e7624c6b4","64f8b6c4a9c59f365c4ea82d","64f8b6f3b4918f39d363e0ff","64f8b9f657e97a76237203b1","64f8b78cb4918f39d363e1bf","64f8b675b997eb4f42755cf9","64f8b692c8626c7d460401b6","64f8c7e733ff7561c876432a","64f8c79e7e981f7f0110d440","64f8c8297e981f7f0110d501","65f773082e9cf257e2717145","594d241f86f7740d8246218d","594d246986f77427fc3b2fb4","594d247486f77426ad2fd20b","594d248186f7740e670685db","596a20d286f7741ddb4815d5","596a108786f7741ddc2d31b1","596b453b86f77457c827bf44","596b465486f77457ca186188","597a0fad86f77426d464f995","597a172486f774799e5cd153","616d993bc8c5ad2ab30ff6ba","626bd75c71bd851e971b82a5","626bd75d5bef5d7d590bd415","626bd75e47ea7f506e5493c5","626bdcc3a371ee3a7a3514c5","628b7dcb543b5b2ab574b759","628b7e7891064964577fa849","628b802d50261e312a790512","628b805544430c635d52a888","636d298d32e6427e443ba62a","642d82abead645348e204ff5","658afe8fface133e6b66a6e4","5968a09a86f7740d137ebfc5","5968ec2986f7741ddf17db83","5969f96786f7741dde183a4f","5979d3da86f774719f309082","5979d3ea86f7746d0b3e3fdc","5979d3f986f7746d08051ce0","5979d36d86f7746d093ddd7a","5979d37886f7746d0b3e3fdb","5979e80986f77437584fb8b2","5979ed4c86f7742f55674442","5979ef2a86f77431185415c3","5979f91c86f77402996bf9c2","5981c96e86f77477920d1a04","6499ae386e932425bb03fb2f","6659f1d081610f6b9003ba57","59675e7b86f77414b25fb049","59675f5486f77414b07f13d0","59689e1c86f7740d14064725","59689f8f86f7740d121082d7","60896b7bfa70fc097863b8f5","61374f53857735719f2f0ca2","64787c4409331b29cb638286","65899c7b6f65fb099516b25d","65899ca16a2e1b55682ab961","65899ce3fd239b582c211d31","65899d03adeac0191c51e880","65899d1fd4523b429f73e0f1","65899d5fb3613b5b1c66f4c4","65899d82c5998b6e94299024","66562a95dadbac1a541f638f","66562aa2119b2147a07d0b35","66562aaaa636bd24a654f416","66562b7f53eaaa7a23349c76","66562b72f73d7f0be65de3d6","66562b89f73d7f0be65de3d8","66562bb83e8d4075e2354446","608974af4b05530f55550c21","658991c8c5998b6e942974ed","658992cd1af57867a167fc13","5967532b86f77461fb2f333a","6089736efa70fc097863b8f6","6477022b8777780aaf4b50c5","6589939cd4523b429f73ce83","6640881e76f836210934d7cf","66754201e843d85e9f10d81b","658991921af57867a167fc0f","5967505886f774590730dadc","5967611386f7741dfe4f46fb","5998365786f7745cb22fea42","6137505384aedf00fa17b651","6137505384aedf00fa17b651","6589928750a60f28611a6eeb","6589937422379436cd78472f","6089743983426423753cd58a","default"],Jt="modulepreload",ye={},Gt="/SPT_CustomQuestsEditor/",Wt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${Gt}${i}`,i in ye)return;ye[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Jt,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((d,a)=>{o.addEventListener("load",d),o.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},Kt=y('<input type="number" min="0">'),Zt=y('<input type="button" value="Remove">'),Ht=y('<div><input type="text" placeholder="Search for item..."><div></div></div>'),Yt=y('<div><label></label><input placeholder="Type item id..." type="text"><input type="button"></div>'),Xt=y("<div></div>");let Pe=[],Ie={};Wt(()=>import("./en.2bfe3d03.js"),[]).then(e=>{const t=e.default.templates;Ie=t,Pe=Object.keys(t).map(n=>[n,t[n]])});const qe=e=>{const[t,n]=E(!1),[i,r]=E([]),s=p(()=>`${e.uniqQuestId}_${e.fieldName}_${String(e.index)}`);L(()=>(n(!1),r([]),s()));const o=p(()=>Ie[e.value]?.Name??void 0);return(()=>{const d=Yt.cloneNode(!0),a=d.firstChild,l=a.nextSibling,f=l.nextSibling;return d.style.setProperty("padding","15px"),d.style.setProperty("background-color","grey"),a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("clear","left"),a.style.setProperty("width","180px"),a.style.setProperty("text-align","right"),a.style.setProperty("margin-right","10px"),_(a,()=>e.fieldName?`${e.fieldName} `:""),l.addEventListener("change",u=>e.onChange(u.currentTarget.value)),l.style.setProperty("width","320px"),_(d,c(w,{get when(){return e.onCounterChanged!==void 0},get children(){const u=Kt.cloneNode(!0);return u.$$input=g=>e.onCounterChanged?.(Number(g.currentTarget.value)),u.style.setProperty("width","100px"),$(()=>u.value=e.count),u}}),f),f.$$click=()=>{const u=t();u&&r([]),n(!u)},_(d,c(w,{get when(){return e.onRemove},get children(){const u=Zt.cloneNode(!0);return u.$$click=()=>{r([]),n(!1),e.onRemove?.()},u}}),null),_(d,c(w,{get when(){return t()},get children(){const u=Ht.cloneNode(!0),g=u.firstChild,v=g.nextSibling;return u.style.setProperty("display","inline-block"),u.style.setProperty("padding","10px"),u.style.setProperty("margin-top","20px"),u.style.setProperty("margin-left","180px"),g.$$input=m=>{const h=m.currentTarget.value,q=Pe.filter(([,C])=>typeof C!="object"?!1:C.Name.toLowerCase().includes(h.trim().toLowerCase())).map(([C,D])=>[C,D.Name]);r(De(50)(q))},v.style.setProperty("padding","10px"),v.style.setProperty("color","black"),_(v,c(A,{get each(){return i()},children:([m,h])=>(()=>{const q=Xt.cloneNode(!0);return q.$$click=()=>e.onChange(m),q.style.setProperty("cursor","pointer"),q.style.setProperty("margin","1px"),_(q,h),$(C=>{const D=m===e.value?"white":"inherit",R=m===e.value?"green":"white";return D!==C._v$5&&q.style.setProperty("color",C._v$5=D),R!==C._v$6&&q.style.setProperty("background-color",C._v$6=R),C},{_v$5:void 0,_v$6:void 0}),q})()})),u}}),null),$(u=>{const g=o(),v=t(),m=e.value,h=t()?"Ok":"Search...";return g!==u._v$&&x(l,"title",u._v$=g),v!==u._v$2&&(l.disabled=u._v$2=v),m!==u._v$3&&(l.value=u._v$3=m),h!==u._v$4&&(f.value=u._v$4=h),u},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),d})()};S(["input","click"]);const en=y('<div><label>rewards.items: </label><input type="button" value="Add item"></div>'),tn=e=>{const t=p(()=>Object.keys(e.rewards));return(()=>{const n=en.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),i.style.setProperty("display","inline-block"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),i.style.setProperty("margin-bottom","10px"),r.$$click=()=>{e.updateRewards(s=>({...s,[""]:1}))},_(n,c(pe,{get each(){return t()},children:(s,o)=>c(qe,{index:o,get count(){return e.rewards[s()]??1},onCounterChanged:d=>e.updateRewards(de(a=>{a[s()]=d})),fieldName:"",get uniqQuestId(){return`${e.uniqQuestId}_${o}`},get value(){return s()},onChange:d=>{e.updateRewards(de(a=>{d!==s()&&(a[d]?a[d]+=a[s()]:a[d]=a[s()],delete a[s()])}))},onRemove:()=>{e.updateRewards(d=>Te([s()],d))}})}),null),n})()};S(["click"]);const nn=y('<div><label></label><input type="number"></div>'),j=e=>(()=>{const t=nn.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName),i.$$input=r=>e.setValue(Number(r.currentTarget.value)),$(r=>{const s=`form_${e.fieldName}`,o=e.min,d=e.max,a=e.value;return s!==r._v$&&x(n,"for",r._v$=s),o!==r._v$2&&x(i,"min",r._v$2=o),d!==r._v$3&&x(i,"max",r._v$3=d),a!==r._v$4&&(i.value=r._v$4=a),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})();S(["input"]);const rn=y("<div><span>Choose a type of mission:</span><div></div></div>"),sn=y('<input type="button">'),an=e=>(()=>{const t=rn.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("margin-bottom","5px"),t.style.setProperty("padding","15px"),t.style.setProperty("background-color","#333333"),t.style.setProperty("color","white"),n.style.setProperty("display","inline-block"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),_(i,c(A,{each:ke,children:r=>(()=>{const s=sn.cloneNode(!0);return s.$$click=()=>e.onClickType(r),s.style.setProperty("margin-right","13px"),s.value=r,s})()})),t})();S(["click"]);const ln=y('<div><label>accepted_items: </label><input type="button" value="Add item"></div>'),we=e=>(()=>{const t=ln.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),i.$$click=()=>{e.updateItems(r=>[...r,""])},_(t,c(A,{get each(){return e.items},children:(r,s)=>c(qe,{get index(){return s()},fieldName:"",get uniqQuestId(){return`${e.uniqId}_${s()}`},value:r,onChange:o=>{e.updateItems(d=>$e(s(),o,d))},onRemove:()=>{e.updateItems(o=>J(s(),1,o))}})}),null),t})();S(["click"]);const on=y('<div><label for="form_found_in_raid_only">found_in_raid_only: </label><input id="form_found_in_raid_only" type="checkbox"></div>'),dn=e=>{const t=p(()=>Boolean(e.mission.found_in_raid_only));return(()=>{const n=on.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",s=>{e.updateMission(o=>({...o,found_in_raid_only:s.currentTarget.checked}))}),$(s=>{const o=e.formIndex,d=t();return o!==s._v$&&x(r,"tabindex",s._v$=o),d!==s._v$2&&(r.checked=s._v$2=d),s},{_v$:void 0,_v$2:void 0}),n})()},cn=e=>{const t=p(()=>`${e.questId}_give_item_${e.index}`),n=p(()=>e.mission.count??0);return[V(()=>e.children),c(M,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),c(j,{fieldName:"count",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,count:i}))}),c(dn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),c(we,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})]},un=e=>{const t=p(()=>e.mission.target??"Savage"),n=p(()=>e.mission.count??1),i=p(()=>`${e.questId}_mission_kill_${e.index}`),r=p(()=>e.mission.locations??[]);return[V(()=>e.children),c(M,{formIndex:-1,updateQuestString:s=>e.updateMission(o=>({...o,message:s(o.message)})),get uniqId(){return i()},get questString(){return e.mission.message},fieldName:"message"}),c(O,{fieldName:"target",formIndex:18,values:xe,get selectedValue(){return t()},onValueChanged:s=>e.updateMission(o=>({...o,target:s}))}),c(j,{min:1,fieldName:"count",get value(){return n()},setValue:s=>e.updateMission(o=>({...o,count:s}))}),c(ne,{wordingButton:"locations",possibleValues:_t,get values(){return r()},updateValues:s=>{e.updateMission(o=>({...o,locations:s(r())}))},get uniqId(){return i()},fieldName:"locations"})]},_n=y('<label for="form_disabled">need_survive: </label>'),fn=y('<input type="checkbox">'),Se=e=>{const t=p(()=>e.mission.need_survive!==void 0&&e.mission.need_survive!=="null");return[(()=>{const n=_n.cloneNode(!0);return n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n})(),(()=>{const n=fn.cloneNode(!0);return n.addEventListener("change",i=>{e.updateMission(r=>i.currentTarget.checked?{...r,need_survive:""}:{...r,need_survive:void 0})}),$(i=>{const r=`form_place_item_need_survive_${e.uniqId}`,s=t();return r!==i._v$&&x(n,"id",i._v$=r),s!==i._v$2&&(n.checked=i._v$2=s),i},{_v$:void 0,_v$2:void 0}),n})(),c(w,{get when(){return t()},get children(){return c(M,{fieldName:"survive message",formIndex:-1,get uniqId(){return e.uniqId},get questString(){return e.mission.need_survive},updateQuestString:n=>e.updateMission(i=>({...i,need_survive:n(i.need_survive)}))})}})]},W={bigmap:["gazel","place_peacemaker_007_N1","place_peacemaker_002_N1","place_peacemaker_002_N2","place_peacemaker_002_N3","extraction_zone_zibbo","fuel1","fuel2","fuel3","fuel4","place_skier_12_2","place_skier_11_3","Q019_3"],woods:["place_peacemaker_007_2_N2","place_peacemaker_007_2_N2_1","place_THX_15","bar_fuel3_1","bar_fuel3_2","bar_fuel3_3","place_skier_12_3","place_skier_11_2","huntsman_005_1","huntsman_005_2","meh_45_radio_area_mark_1","meh_45_radio_area_mark_2","meh_45_radio_area_mark_3","meh_45_radio_area_mark_4","q14_8_1","q14_8_2","q14_8_3","q14_8_4","q14_8_5"],shoreline:["place_peacemaker_007_2_N3","place_peacemaker_008_2_N1","place_peacemaker_008_2_N2","place_peacemaker_003_N1","place_peacemaker_003_N2","place_peacemaker_003_N3","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","place_SIGNAL_03_1","place_SIGNAL_03_2","place_SIGNAL_03_3","place_peacemaker_001","ter_013_area_1","ter_013_area_2","ter_013_area_3","skier_022_area_1","skier_022_area_2","skier_022_area_3","prapor_022_area_1","prapor_022_area_2","prapor_022_area_3"],interchange:["place_WARBLOOD_04_1","place_WARBLOOD_04_2","place_WARBLOOD_04_3","place_skier_12_1","place_skier_11_1","place_merch_21_1","place_merch_21_2","place_merch_21_3","place_merch_020_1","place_merch_020_2","quest_zone_keeper6_kiba_hide","quest_zone_keeper6_safe_hide","quest_zone_keeper6_cont_hide"],factory:["place_SADOVOD_01_1","place_SADOVOD_01_2","case_extraction","ter_017_area_1"],lighthouse:["qlight_pr1_heli1_mark","qlight_mark_vech1","qlight_mark_vech2","qlight_mark_vech3","qlight_mark_vech4","qlight_fuel_blood","qlight_fuel_blood_bezovoz1","qlight_fuel_blood_bezovoz2","qlight_fuel_blood_bezovoz3","qlight16_peace_terra","meh_42_radio_area_mark_1","meh_42_radio_area_mark_2","meh_42_radio_area_mark_3","meh_42_radio_area_mark_4","qlight_extension_medic1_hide1","qlight_extension_mechanik1_hide1"],rezervbase:["tadeush_bmp2_area_mark_2","tadeush_bmp2_area_mark_11","tadeush_bmp2_area_mark_12","tadeush_bmp2_area_mark_13","tadeush_stryker_area_mark_3","baraholshik_fuel_area_2","baraholshik_fuel_area_3"],tarkovstreets:["quest_zone_place_c14_revx_1","quest_zone_place_c14_revx_2","quest_zone_place_c14_revx_3","quest_zone_keeper10_place","quest_zone_hide_sillent","quest_zone_hide_sillent2","quest_zone_hide_barber1","quest_zone_hide_barber2","quest_city_trotil2","quest_city_trotil1"],groundzero:[],any:["quest_zone_place_c24_tigr1","quest_zone_place_c24_tigr2","tadeush_bmp2_area_mark_12","place_keeper5_1","place_keeper5_2","quest_zone_keeper8_1_hide1","quest_zone_keeper8_1_hide2","quest_zone_hide_2st_mech","place_flyers1"]},Ne=Object.keys(W),gn=e=>Ne.find(t=>W[t].includes(e)),mn=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),s=p(()=>W[t()]);return L(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,zone_id:W[t()][0]})),i())),L(o=>{if(o!==e.mission.zone_id){const d=gn(e.mission.zone_id);d&&n(d)}return e.mission.zone_id}),[c(O,{fieldName:"map",formIndex:-1,values:Ne,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),c(O,{fieldName:"zone_id",fieldLink:"https://github.com/guillaumearm/SPT_CustomQuests/blob/master/docs/ALL_ZONES.md",formIndex:-1,get values(){return s()},get selectedValue(){return e.mission.zone_id},onValueChanged:o=>{e.updateMission(d=>({...d,zone_id:o}))}})]},H=e=>{const t=p(()=>`${e.questId}_place_item_${e.index}`),n=p(()=>e.mission.plant_time??30);return[V(()=>e.children),c(M,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),c(mn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),c(j,{fieldName:"plant_time",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,plant_time:i}))}),c(Se,{get uniqId(){return t()},get mission(){return e.mission},updateMission:i=>e.updateMission(r=>i(r))}),c(w,{get when(){return e.mission.type==="PlaceItem"},get children(){return c(we,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})}})]},K={bigmap:["gazel","dead_posylni","vremyan_case","room206_water","vaz_feld","room114","room214","bomj_place","place_SADOVOD_03"],woods:["bunker2","ter_015_area_1","huntsman_001","pr_scout_col","pr_scout_base"],shoreline:["place_peacemaker_007_1_N1","place_peacemaker_010_3","place_peacemaker_004_N1","place_peacemaker_004_N2","place_peacemaker_009_2","place_peacemaker_009_3_N1","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","huntsman_026","place_peacemaker_008_4_N1","place_peacemaker_008_4_N2","place_peacemaker_001","place_SIGNAL_01_1","place_SIGNAL_01_2","place_meh_sanitar_room","huntsman_024_1","huntsman_024_2","huntsman_024_3","ter_023_area_1_1","ter_023_area_3_1","ter_023_area_2_1"],interchange:["place_SALE_03_AVOKADO","place_SALE_03_KOSTIN","place_SALE_03_TREND","place_SALE_03_DINO","place_SALE_03_TOPBRAND"],factory:["pumproom","place_pacemaker_SCOUT_01","place_pacemaker_SCOUT_02","place_pacemaker_SCOUT_03","place_pacemaker_SCOUT_04","ter_017_area_1","locked_office"],lighthouse:["qlight_pr1_heli1_find","qlight_hunt_fr_find","qlight_find_light_merchant","qlight_find_crushed_heli","qlight_find_scav_group1","meh_48_transponder_area_check_1","meh_50_visit_area_check_1","qlight_extension_medic1_exploration1","qlight_extension_prapor1_exploration1","qlight_extension_prapor1_exploration2","qlight_extension_prapor1_exploration3","qlight_extension_bariga1_exploration1","qlight_extension_mechanik1_exploration1"],rezervbase:["huntsman_029","prapor_024_area_2","prapor_024_area_1","tadeush_bmp2_area_check_2","tadeush_bmp2_area_check_11","tadeush_bmp2_area_check_12","tadeush_bmp2_area_check_13","tadeush_stryker_area_check_3","tadeush_stryker_area_check_4","tadeush_t90_area_check_1","mechanik_exit_area_1","prapor_025_area_1","prapor_025_area_2","prapor_025_area_3","prapor_025_area_4","prapor_025_area_5","baraholshik_arsenal_area_1","baraholshik_dejurniy_area_2","baraholshik_arsenal_area_3","baraholshik_arsenal_area_4","baraholshik_arsenal_area_5"],laboratory:["peace_027_area","quest_zone_keeper7_saferoom","quest_zone_keeper7_test"],tarkovstreets:["quest_zone_keeper8_1","quest_zone_keeper8_2","quest_zone_find_2st_mech","quest_zone_c5_mar","quest_zone_c6_kpss","quest_zone_c7_mel","quest_zone_c8_dom1","quest_zone_c8_dom2","quest_zone_c8_dom2_dead","quest_zone_c11_gmed","quest_zone_c16_koll_1","quest_zone_c16_koll_2","quest_zone_c21_look","quest_zone_c25_cinem","quest_zone_c27_sect","quest_zone_keeper99","quest_zone_c29_debt","quest_zone_c25_cinem2","quest_produkt1","quest_produkt2","quest_produkt3","quest_produkt4","quest_zone_find_sillent","quest_zone_find_2st_kpss2","quest_zone_find_2st_med_invent1","quest_zone_find_2st_med_invent2","Bank_points_3","Bank_points_4","Bank_points_6","Bank_points_1","Bank_points_2","Bank_points_8","Bank_points_9","Bank_points_10","Bank_points_13","Bank_points_11","Bank_points_12","Bank_points_5","Bank_points_14","Bank_points_15","Bank_points_16","Office_enter","Office_quest","Hookah_quest","Pharma_1","Pharma_2","Pharma_3","fond_quest"],groundzero:["Sandbox_1_MedicalArea_exploration","Sandbox_2_Kord_exploration","Sandbox_2_AGS_exploration","Sandbox_3_Vino_exploration","Sandbox_5_DeadGroup_exploration","Sandbox_5_Laborant_exploration","Sandbox_5_Office_exploration"]},Ee=Object.keys(K),bn=e=>Ee.find(t=>K[t].includes(e)),yn=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),s=p(()=>K[t()]);return L(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,place_id:K[t()][0]})),i())),L(o=>{if(o!==e.mission.place_id){const d=bn(e.mission.place_id);d&&n(d)}return e.mission.place_id}),[c(O,{fieldName:"map",formIndex:-1,values:Ee,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),c(O,{fieldName:"place_id",fieldLink:"https://github.com/guillaumearm/SPT_CustomQuests/blob/master/docs/ALL_PLACES.md",formIndex:-1,get values(){return s()},get selectedValue(){return e.mission.place_id},onValueChanged:o=>{e.updateMission(d=>({...d,place_id:o}))}})]},hn=y("<br>"),vn=e=>[V(()=>e.children),c(M,{formIndex:-1,updateQuestString:t=>e.updateMission(n=>({...n,message:t(n.message)})),get uniqId(){return e.questId},get questString(){return e.mission.message},fieldName:"message"}),c(yn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),hn.cloneNode(!0),c(Se,{get uniqId(){return e.questId},get mission(){return e.mission},updateMission:t=>e.updateMission(n=>t(n))})],pn=y("<h4> mission</h4>"),$n=y('<input type="button" value="Remove">'),kn=y('<input type="button" value="Up">'),xn=y('<input type="button" value="Down">'),ie=y("<div></div>"),Pn=y('<input type="button" value="Add a mission...">'),In=y('<div><input type="button" value="Cancel"></div>'),qn=e=>{const t=p(()=>[(()=>{const n=pn.cloneNode(!0),i=n.firstChild;return n.style.setProperty("margin","0"),n.style.setProperty("width","90%"),n.style.setProperty("display","inline-block"),_(n,()=>e.mission.type,i),n})(),(()=>{const n=$n.cloneNode(!0);return B(n,"click",e.onRemoveMission,!0),n.style.setProperty("top","0px"),n.style.setProperty("float","right"),n})(),(()=>{const n=kn.cloneNode(!0);return n.$$click=()=>e.onClickUp(e.index),$(()=>n.disabled=e.index===0),n})(),(()=>{const n=xn.cloneNode(!0);return n.$$click=()=>e.onClickDown(e.index),$(()=>n.disabled=e.index===e.nbMissions-1),n})()]);return(()=>{const n=ie.cloneNode(!0);return n.style.setProperty("padding","15px"),n.style.setProperty("background-color","#333333"),n.style.setProperty("color","white"),_(n,c(U,{get fallback(){return`Unknown mission type '${e.mission.type}'`},get children(){return[c(N,{get when(){return e.mission.type==="Kill"},get children(){return c(un,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),c(N,{get when(){return e.mission.type==="GiveItem"},get children(){return c(cn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),c(N,{get when(){return e.mission.type==="PlaceItem"},get children(){return c(H,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),c(N,{get when(){return e.mission.type==="PlaceBeacon"},get children(){return c(H,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),c(N,{get when(){return e.mission.type==="PlaceSignalJammer"},get children(){return c(H,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),c(N,{get when(){return e.mission.type==="VisitPlace"},get children(){return c(vn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}})]}})),n})()},wn=e=>{const[t,n]=E(!1),i=p(()=>e.quest.missions??[]),r=a=>{const l=Ct[a];e.updateQuest(f=>{const u=f.missions??[];return{...f,missions:[...u,l]}}),n(!1)},s=a=>{e.updateQuest(l=>{const f=l.missions??[];return{...l,missions:J(a,1,f)}})},o=a=>{e.updateQuest(l=>{const f=l.missions??[];return a===0?l:{...l,missions:G(a,a-1,f)}})},d=a=>{e.updateQuest(l=>{const f=l.missions??[];return a===f.length-1?l:{...l,missions:G(a,a+1,f)}})};return(()=>{const a=ie.cloneNode(!0);return a.style.setProperty("padding","15px"),_(a,c(pe,{get each(){return i()},children:(l,f)=>(()=>{const u=ie.cloneNode(!0);return u.style.setProperty("padding","15px"),u.style.setProperty("background-color","grey"),_(u,c(qn,{get nbMissions(){return i().length},onClickUp:o,onClickDown:d,get questId(){return e.quest.id},index:f,onRemoveMission:()=>s(f),updateMission:g=>e.updateQuest(v=>{const m=v.missions??[],h=$e(f,g(l()),m);return{...v,missions:h}}),get mission(){return l()}})),u})()}),null),_(a,c(w,{get when(){return!t()},get children(){const l=Pn.cloneNode(!0);return l.$$click=()=>n(!0),l}}),null),_(a,c(w,{get when(){return t()},get children(){const l=In.cloneNode(!0),f=l.firstChild;return l.style.setProperty("padding","15px"),l.style.setProperty("background-color","grey"),f.$$click=()=>n(!1),_(l,c(an,{onClickType:r}),null),l}}),null),a})()};S(["click"]);const Sn=y('<div id="quest_form"><div><h4>Quest configuration</h4><input type="button" value="UP"><input type="button" value="DOWN"><input type="button" value="Duplicate quest"><input type="button" value="Remove quest"></div><form><h2>Missions</h2></form></div>'),Nn=["prapor","therapist","fence","skier","peacekeeper","mechanic","ragman","jaeger"],En=e=>{const t=p(()=>`${e.quest.id}_${e.questIndex}`),n=p(()=>e.quest.rewards?.items??{}),i=p(()=>e.quest.locked_by_quests??[]),r=p(()=>e.quest.unlock_on_quest_start??[]);return(()=>{const s=Sn.cloneNode(!0),o=s.firstChild,d=o.firstChild,a=d.nextSibling,l=a.nextSibling,f=l.nextSibling,u=f.nextSibling,g=o.nextSibling,v=g.firstChild;return s.style.setProperty("border","1px solid black"),s.style.setProperty("margin","1px"),s.style.setProperty("padding","10px"),s.style.setProperty("width","60%"),s.style.setProperty("height","90%"),s.style.setProperty("overflow-y","scroll"),s.style.setProperty("background-color","lightgrey"),s.style.setProperty("float","left"),o.style.setProperty("padding","10px"),o.style.setProperty("background-color","grey"),d.style.setProperty("margin","0"),d.style.setProperty("text-align","center"),B(a,"click",e.onMoveUp,!0),a.style.setProperty("margin","0px"),B(l,"click",e.onMoveDown,!0),l.style.setProperty("margin","0px"),B(f,"click",e.onDupliacteQuest,!0),f.style.setProperty("margin","0px"),B(u,"click",e.onRemove,!0),u.style.setProperty("float","right"),u.style.setProperty("margin","0px"),g.addEventListener("submit",()=>{}),g.style.setProperty("margin-left","21px"),_(g,c(gt,ce({formIndex:2},e)),v),_(g,c(bt,ce({formIndex:4},e,{fieldName:"id"})),v),_(g,c(te,{formIndex:6,fieldName:"trader_id",get uniqId(){return t()},allValues:Nn,get value(){return e.quest.trader_id},setValue:m=>e.updateQuest(h=>({...h,trader_id:m}))}),v),_(g,c(M,{formIndex:8,updateQuestString:m=>e.updateQuest(h=>({...h,name:m(h.name)})),get uniqId(){return t()},get questString(){return e.quest.name},fieldName:"name"}),v),_(g,c(M,{formIndex:10,updateQuestString:m=>e.updateQuest(h=>({...h,description:m(h.description)})),get uniqId(){return t()},get questString(){return e.quest.description},fieldName:"description"}),v),_(g,c(M,{formIndex:12,updateQuestString:m=>e.updateQuest(h=>({...h,success_message:m(h.success_message)})),get uniqId(){return t()},get questString(){return e.quest.success_message},fieldName:"success_message"}),v),_(g,c(O,{fieldName:"type",formIndex:14,values:re,get selectedValue(){return e.quest.type??re[0]},onValueChanged:m=>e.updateQuest(h=>({...h,type:m}))}),v),_(g,c(O,{fieldName:"descriptive_location",formIndex:16,values:Y,get selectedValue(){return e.quest.descriptive_location??Y[0]},onValueChanged:m=>e.updateQuest(h=>({...h,descriptive_location:m}))}),v),_(g,c(O,{fieldName:"image",formIndex:18,values:be,get selectedValue(){return e.quest.image??be[0]},onValueChanged:m=>e.updateQuest(h=>({...h,image:m}))}),v),_(g,c(j,{min:1,fieldName:"level_needed",get value(){return e.quest.level_needed??1},setValue:m=>e.updateQuest(h=>({...h,level_needed:m}))}),v),_(g,c(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return i()},updateValues:m=>e.updateQuest(h=>({...h,locked_by_quests:m(i())})),get uniqId(){return t()},fieldName:"locked_by_quests"}),v),_(g,c(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return r()},updateValues:m=>e.updateQuest(h=>({...h,unlock_on_quest_start:m(r())})),get uniqId(){return t()},fieldName:"unlock_on_quest_start"}),v),_(g,c(j,{fieldName:"rewards.xp",get value(){return e.quest.rewards?.xp??0},setValue:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,xp:m}}))}),v),_(g,c(tn,{updateRewards:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,items:{...m(h.rewards?.items??{})}}})),get uniqQuestId(){return t()},get rewards(){return n()}}),v),_(g,c(wn,{get quest(){return e.quest},get updateQuest(){return e.updateQuest}}),null),$(m=>{const h=e.questIndex===0,q=e.questIndex===e.nbQuests-1;return h!==m._v$&&(a.disabled=m._v$=h),q!==m._v$2&&(l.disabled=m._v$2=q),m},{_v$:void 0,_v$2:void 0}),s})()};S(["click"]);const Cn=y("<div><div><h4></h4></div><ul></ul></div>"),Qn=y('<input type="text">'),Ln=y('<input type="button" value="Ok">'),An=y("<li></li>"),Mn=(e=!1,t=!1)=>{const n=()=>t&&e?"#606060":t?"#AAAAAA":e?"#303030":"inherit",i=()=>t?"inherit":e?"white":"inherit";return{"margin-bottom":"1px",border:"1px solid grey","text-align":"center","overflow-x":"scroll",cursor:"pointer","background-color":n(),color:i(),"text-decoration":t?"line-through":"inherit"}},Ce=e=>(()=>{const t=Cn.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("border","1px solid black"),t.style.setProperty("margin","1px"),t.style.setProperty("padding","10px"),t.style.setProperty("width","15%"),t.style.setProperty("height","90%"),t.style.setProperty("overflow-y","scroll"),t.style.setProperty("float","left"),n.style.setProperty("text-align","center"),_(i,()=>e.title),r.style.setProperty("padding","0"),r.style.setProperty("padding-bottom","20px"),r.style.setProperty("white-space","nowrap"),_(r,()=>e.children),$(()=>t.style.setProperty("background-color",e.isDragging?"#505050":"lightgrey")),t})(),Qe=e=>{const[t,n]=E(e.text),[i,r]=E(Boolean(e.enableEdition&&e.text==="new_quest_file")),s=p(()=>`${e.index}_${Boolean(e.enableEdition)}`),o=()=>{e.onEditEnter?.(t(),e.index),r(!1)};return L(()=>{const d=document.getElementById(s());return d&&(d.focus(),d.select()),i()}),(()=>{const d=An.cloneNode(!0);return d.$$click=()=>e.onClick(),d.$$dblclick=()=>e.enableEdition&&!i()&&r(!0),_(d,c(U,{get children(){return[c(N,{get when(){return i()},get children(){return[(()=>{const a=Qn.cloneNode(!0);return a.$$input=l=>n(l.currentTarget.value),a.addEventListener("keypress",l=>{l.key==="Enter"&&o()}),a.style.setProperty("width","80%"),$(l=>{const f=s(),u=t();return f!==l._v$&&x(a,"id",l._v$=f),u!==l._v$2&&(a.value=l._v$2=u),l},{_v$:void 0,_v$2:void 0}),a})(),(()=>{const a=Ln.cloneNode(!0);return a.$$click=()=>o(),a.style.setProperty("width","15%"),a})()]}}),c(N,{get when(){return!i()},get children(){return e.text}})]}})),$(a=>Be(d,Mn(e.selected,!!e.disabled),a)),d})()};S(["dblclick","click","input"]);const On=y('<div><input type="button" value="Create new file..."></div>'),Vn=e=>{const t=e.split(".json");return t.length>=2?se(1,t).join(".json"):e},zn=e=>c(Ce,{get isDragging(){return e.isDragging()},title:"Quest files",get children(){return[c(A,{get each(){return e.loadedJsonFiles},children:(t,n)=>c(Qe,{get index(){return n()},enableEdition:!0,get selected(){return n()===e.selectedFile},onClick:()=>e.onClickFile(n()),get onEditEnter(){return e.onEditFilename},get text(){return Vn(t.name)}})}),(()=>{const t=On.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewFile(),t})(),V(()=>e.children)]}});S(["click"]);const Dn=y('<div><input type="button" value="Remove quest file..."></div>'),Tn=y('<div><input type="button" value="Create new quest..."></div>'),Bn=e=>c(Ce,{isDragging:!1,title:"Quests",get children(){return[c(A,{get each(){return e.file?.data},children:(t,n)=>c(Qe,{get index(){return n()},get disabled(){return Boolean(t.disabled)||t.id===""},get selected(){return n()===e.selectedQuest},onClick:()=>e.onClickQuest(n()),get text(){return t.id||"<no id>"}})}),V(()=>e.children),(()=>{const t=Tn.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewQuest(),_(t,c(w,{get when(){return(e.file?.data??[]).length===0},get children(){const i=Dn.cloneNode(!0),r=i.firstChild;return r.$$click=()=>e.onRemoveQuestFile(),i}}),null),t})()]}});S(["click"]);const Fn=y("<div></div>"),Rn=()=>({id:"",trader_id:"prapor"}),jn="#737373",Un="#b3b3b3",Jn={selections:{file:null,quest:0},files:[]},Gn=e=>{const t={};return e.forEach(n=>{n.data.forEach(i=>{t[i.id]=!0,i.locked_by_quests?.forEach(r=>{t[r]=!0}),i.unlock_on_quest_start?.forEach(r=>{t[r]=!0})})}),Object.keys(t)},he=e=>{const t=e.split("_"),n=t[t.length-1];return ae(NaN,Number(n))?null:Number(n)},ve=e=>{const t=e.split("_"),n=t[t.length-1];return ae(NaN,Number(n))?null:se(1,t).join("_")},Wn=(e,t)=>{let n=0;const i=e.split("_"),r=i[i.length-1];if(ae(NaN,Number(r)))t.forEach(s=>{if(ve(s)===e){const o=he(s);o!==null&&o>=n&&(n=o+1)}});else{const s=se(1,i).join("_");return n=Number(r),t.forEach(o=>{if(ve(o)===s){const d=he(o);d!==null&&d>n&&(n=d)}}),s?`${s}_${n+1}`:String(n+1)}return e?`${e}_${n}`:String(n)};function Kn(e){const[t,n]=Fe(e);return localStorage.CustomQuestsEditor&&n(JSON.parse(localStorage.CustomQuestsEditor)),L(()=>localStorage.CustomQuestsEditor=JSON.stringify(t)),[t,n]}const Zn=()=>{const[e,t]=Kn(Jn),n=E(!1),[i]=n,r=p(()=>e.selections.quest),s=p(()=>e.files[e.selections.file??0]),o=p(()=>{const b=s();if(b)return b.data[e.selections.quest??0]}),d=p(()=>{const b=s();return b?b.data.length:0}),a=p(()=>e.selections.file!==null),l=p(()=>{const b=o(),k=e.selections.file,I=e.selections.quest;if(b&&k!==null&&I!==null)return z=>{t("files",k,"data",I,z)}}),f=()=>{const b=e.selections.file;if(b!==null){const k=e.files[b].data.length;t("files",b,"data",I=>[...I,Rn()]),t("selections","quest",k)}},u=()=>{const b=r(),k=e.selections.file;if(k!==null&&b!==null&&b>0){const I=b;t("files",k,"data",Q=>(t("selections","quest",()=>I-1),G(b,b-1)(Q)))}},g=()=>{const b=r(),k=e.selections.file;if(k!==null&&b!==null&&b<d()-1){const I=b;t("files",k,"data",Q=>(t("selections","quest",()=>I+1),G(b,b+1)(Q)))}},v=()=>{const b=r(),k=e.selections.file;if(k!==null&&b!==null){const I=b;t("files",k,"data",Q=>{if(I===Q.length-1){const z=I===0?null:I-1;t("selections","quest",()=>z)}return J(I,1,Q)})}},m=()=>{const b=r(),k=e.selections.file;if(k!==null&&b!==null){const I=e.files[k].data[b];if(I){const Q=e.files[k].data.map(T=>T.id),z=Wn(I.id,Q);t("files",k,"data",T=>[...T,{...I,id:z}])}}},h=()=>{const b=e.selections.file;b!==null&&t("files",k=>{if(b===k.length-1){const I=b===0?null:b-1;t("selections","file",()=>I)}return J(b,1,k)})},q=(b,k)=>{b&&t("files",k,"name",`${b}.json`)},C=()=>{const b=e.files.length;t("files",k=>[...k,{name:"new_quest_file.json",data:[]}]),t("selections","file",b)},D=p(()=>Gn(e.files)),R=b=>{t("selections","file",b)},Ae=b=>{t("selections","quest",b)};return(()=>{const b=Fn.cloneNode(!0);return b.style.setProperty("overflow-x","scroll"),b.style.setProperty("height","100vh"),_(b,c(tt,{get customQuestsVersion(){return ue.custom_quests_target_version},get children(){return`Custom Quests Editor v${ue.version}`}}),null),_(b,c(nt,{isDraggingSignal:n,onDropJson:(k,I)=>{const z=e.files.length;try{const Me=Ft(I).filter(Vt);t("files",Oe=>[...Oe,{name:k,data:Me}])}catch(T){console.warn(`Custom Quests Editor: Unable to load json quest file '${k}'`),console.error(`${T}`);return}e.selections.file===null&&R(z)}}),null),_(b,c(zn,{onEditFilename:q,onCreateNewFile:C,isDragging:i,onClickFile:R,get loadedJsonFiles(){return e.files},get selectedFile(){return e.selections.file},get children(){return c(w,{get when(){return a()},get children(){return c(dt,{tabIndex:-1,get loadedJsonFiles(){return e.files},get selectedQuestFile(){return e.selections.file}})}})}}),null),_(b,c(w,{get when(){return a()},get children(){return c(Bn,{onRemoveQuestFile:h,onCreateNewQuest:f,onClickQuest:Ae,get file(){return s()},get selectedQuest(){return e.selections.quest}})}}),null),_(b,c(w,{get when(){return V(()=>o()!==void 0,!0)()&&l()!==void 0},get children(){return c(En,{get nbQuests(){return d()},onMoveUp:u,onMoveDown:g,onRemove:v,onDupliacteQuest:m,get allQuestIds(){return D()},get questIndex(){return r()},get quest(){return o()},get updateQuest(){return l()}})}}),null),$(()=>b.style.setProperty("background-color",i()?jn:Un)),b})()},Le=document.getElementById("root");if(!Le)throw new Error("Fatal: no div #root found in the DOM");Re(()=>c(Zn,{}),Le);
